{"version":3,"sources":["webpack:///./src/assets/js/util.js","webpack:///./src/views/EnterpriseDataAccess/BusinessOperationRegistration.vue?78f3","webpack:///src/views/EnterpriseDataAccess/BusinessOperationRegistration.vue","webpack:///./src/views/EnterpriseDataAccess/BusinessOperationRegistration.vue?4afb","webpack:///./src/views/EnterpriseDataAccess/BusinessOperationRegistration.vue"],"names":["iconClassName","icon","indexOf","formatTemplateHeight","elements","height","Array","offsetHeight","_","each","item","parseInt","e","console","error","templateHeight","content","element","cb","style","window","addEventListener","filterTablePage","data","pageSize","currentPage","pageIndex","filter","index","render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","query","model","value","callback","$$v","$set","expression","_l","key","label","on","handleQueryClick","_v","handleAddClick","directives","name","rawName","table","filterTableList","formatterTableState","formatterTableTime","scopedSlots","_u","fn","scope","$event","handleTableEdit","row","handleTableDel","ID","total","handleTablePageCurrentChange","dialog","title","display","handleClose","form","slot","submitInfo","staticRenderFns","abb_name","yyzt","yyztOptions","loading","selectRow","gsbm","appName","qyqc","computed","mounted","$nextTick","methods","editShow","OPERATING","COMPANY_ID","ABB_NAME","NAME","$confirm","confirmButtonText","cancelButtonText","cancelButtonClass","closeOnClickModal","type","center","val","$message","warning","getDataList","component"],"mappings":"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","file":"js/chunk-6262f028.4fc981f0.js","sourcesContent":["/*\r\n * @Descripttion:\r\n * @version:\r\n * @Author: CFQ\r\n * @Date: 2019-12-09 11:58:35\r\n * @LastEditors: CFQ\r\n * @LastEditTime: 2020-05-28 18:53:48\r\n */\r\n\r\nimport { Loading } from 'element-ui'\r\nimport _ from 'underscore'\r\n\r\nexport function iconClassName(icon) {\r\n  if (icon.indexOf('icon-') === 0) return `iconfont ${icon}`\r\n  else if (icon.indexOf('el-icon-') === 0) return icon\r\n  else return ''\r\n}\r\nexport function formatTemplateHeight(elements) {\r\n  let height = 0\r\n  if (!(elements instanceof Array) && !elements.offsetHeight) return ''\r\n  if (elements instanceof Array)\r\n    _.each(elements, item => {\r\n      try {\r\n        height += parseInt(item.offsetHeight)\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    })\r\n  else height = parseInt(elements.offsetHeight)\r\n  return `calc(100% - ${height}px)`\r\n}\r\nexport function templateHeight(content, element, cb) {\r\n  if (cb) cb()\r\n  content.style.height = formatTemplateHeight(element)\r\n  window.addEventListener('resize', () => {\r\n    content.style.height = formatTemplateHeight(element)\r\n    if (cb) cb()\r\n  })\r\n}\r\n\r\n/**\r\n * 前端分页\r\n * @param data\r\n * @param pageSize\r\n * @param currentPage\r\n * @returns {Array}\r\n */\r\nexport function filterTablePage({ data, pageSize, currentPage }) {\r\n  const pageIndex = currentPage - 1\r\n  return _.filter(data, (item, index) => {\r\n    return index >= pageIndex * pageSize && index < currentPage * pageSize\r\n  })\r\n}\r\n\r\nexport function changeHeight(elements) {\r\n  let height = 0\r\n  if (!(elements instanceof Array) && !elements.offsetHeight) return ''\r\n  if (elements instanceof Array)\r\n    _.each(elements, item => {\r\n      try {\r\n        height += parseInt(item.offsetHeight)\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    })\r\n  else height = elements.offsetHeight\r\n  return `calc(100% - ${height}px)`\r\n}\r\nexport function templateBodyHeight(center, elements) {\r\n  window.onresize = () => {\r\n    center.style.height = changeHeight(elements)\r\n  }\r\n  center.style.height = changeHeight(elements)\r\n}\r\n\r\nexport function listUnique(array) {\r\n  let temp = [] //一个新的临时数组\r\n  for (let i = 0; i < array.length; i++) {\r\n    if (temp.indexOf(array[i]) == -1) {\r\n      temp.push(array[i])\r\n    }\r\n  }\r\n  return temp\r\n}\r\n\r\nexport function loading() {\r\n  return Loading.service({\r\n    lock: true,\r\n    text: '加载中',\r\n    target: document.getElementById('right') // 设置加载动画区域\r\n  })\r\n}\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-template-wrapper\"},[_c('el-form',{ref:\"queryBar\",staticClass:\"tw-query-bar\",attrs:{\"inline\":true,\"model\":_vm.query,\"size\":\"small\"}},[_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"APP名称\",\"clearable\":\"\"},model:{value:(_vm.query.abb_name),callback:function ($$v) {_vm.$set(_vm.query, \"abb_name\", $$v)},expression:\"query.abb_name\"}})],1),_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"企业全称\",\"clearable\":\"\"},model:{value:(_vm.query.name),callback:function ($$v) {_vm.$set(_vm.query, \"name\", $$v)},expression:\"query.name\"}})],1),_c('el-form-item',[_c('el-select',{staticClass:\"tw-block\",attrs:{\"placeholder\":\"运营状态\"},model:{value:(_vm.query.yyzt),callback:function ($$v) {_vm.$set(_vm.query, \"yyzt\", $$v)},expression:\"query.yyzt\"}},_vm._l((_vm.query.yyztOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQueryClick}},[_vm._v(\"查询\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleAddClick}},[_vm._v(\"添加企业\")])],1)],1),_c('div',{ref:\"queryPanel\",staticClass:\"tw-query-panel\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.table.loading),expression:\"table.loading\"}],staticClass:\"tw-table\",attrs:{\"data\":_vm.filterTableList,\"border\":\"\",\"size\":\"small\",\"height\":\"calc(100% - 42px)\"}},[_c('el-table-column',{attrs:{\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\",\"align\":\"center\",\"resizable\":false}}),_c('el-table-column',{attrs:{\"label\":\"公司编码\",\"prop\":\"COMPANY_ID\",\"align\":\"center\",\"width\":\"250\"}}),_c('el-table-column',{attrs:{\"label\":\"APP名称\",\"prop\":\"ABB_NAME\",\"align\":\"center\",\"width\":\"250\"}}),_c('el-table-column',{attrs:{\"label\":\"企业全称\",\"prop\":\"NAME\",\"align\":\"center\",\"min-width\":\"300\"}}),_c('el-table-column',{attrs:{\"label\":\"运营状态\",\"formatter\":_vm.formatterTableState,\"prop\":\"OPERATING\",\"align\":\"center\",\"width\":\"250\"}}),_c('el-table-column',{attrs:{\"label\":\"更新时间\",\"formatter\":_vm.formatterTableTime,\"prop\":\"DBTIME\",\"align\":\"center\",\"width\":\"250\"}}),_c('el-table-column',{attrs:{\"label\":\"操作\",\"align\":\"center\",\"width\":\"200\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleTableEdit(scope.row)}}},[_vm._v(\"修改\")]),_c('el-button',{attrs:{\"type\":\"primary\",\"plain\":\"\",\"size\":\"small\"},on:{\"click\":function($event){return _vm.handleTableDel(scope.row.ID)}}},[_vm._v(\"删除\")])]}}])})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"page-size\":_vm.table.pageSize,\"current-page\":_vm.table.currentPage,\"total\":_vm.table.total},on:{\"current-change\":_vm.handleTablePageCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":_vm.dialog.title,\"visible\":_vm.dialog.display,\"close-on-click-modal\":false,\"custom-class\":\"tw-dialog\",\"width\":\"600px\"},on:{\"update:visible\":function($event){return _vm.$set(_vm.dialog, \"display\", $event)},\"close\":_vm.handleClose}},[_c('el-form',{attrs:{\"label-width\":\"110px\"}},[_c('el-form-item',{attrs:{\"label\":\"公司编码\"}},[_c('el-input',{attrs:{\"placeholder\":\"公司编码\"},model:{value:(_vm.dialog.form.gsbm),callback:function ($$v) {_vm.$set(_vm.dialog.form, \"gsbm\", $$v)},expression:\"dialog.form.gsbm\"}})],1),_c('el-form-item',{attrs:{\"label\":\"APP名称\"}},[_c('el-input',{attrs:{\"placeholder\":\"APP名称\"},model:{value:(_vm.dialog.form.appName),callback:function ($$v) {_vm.$set(_vm.dialog.form, \"appName\", $$v)},expression:\"dialog.form.appName\"}})],1),_c('el-form-item',{attrs:{\"label\":\"企业全称\"}},[_c('el-input',{attrs:{\"placeholder\":\"企业全称\"},model:{value:(_vm.dialog.form.qyqc),callback:function ($$v) {_vm.$set(_vm.dialog.form, \"qyqc\", $$v)},expression:\"dialog.form.qyqc\"}})],1),_c('el-form-item',{attrs:{\"label\":\"运营状态\"}},[_c('el-select',{staticClass:\"tw-block\",attrs:{\"placeholder\":\"运营状态\"},model:{value:(_vm.dialog.form.yyzt),callback:function ($$v) {_vm.$set(_vm.dialog.form, \"yyzt\", $$v)},expression:\"dialog.form.yyzt\"}},_vm._l((_vm.dialog.form.yyztOptions),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":_vm.handleClose}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.submitInfo}},[_vm._v(\"确 定\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--\r\n * @Descripttion: 企业运营登记\r\n * @version: \r\n * @Author: CFQ\r\n * @Date: 2020-04-13 15:59:17\r\n * @LastEditors: CFQ\r\n * @LastEditTime: 2020-06-02 18:47:49\r\n -->\r\n\r\n<template>\r\n  <div class=\"tw-template-wrapper\">\r\n    <el-form class=\"tw-query-bar\" :inline=\"true\" :model=\"query\" size=\"small\" ref=\"queryBar\">\r\n      <el-form-item>\r\n        <el-input placeholder=\"APP名称\" clearable v-model=\"query.abb_name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-input placeholder=\"企业全称\" clearable v-model=\"query.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-select class=\"tw-block\" v-model=\"query.yyzt\" placeholder=\"运营状态\">\r\n          <el-option\r\n            v-for=\"item in query.yyztOptions\"\r\n            :key=\"item.value\"\r\n            :label=\"item.label\"\r\n            :value=\"item.value\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleQueryClick\">查询</el-button>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleAddClick\">添加企业</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div class=\"tw-query-panel\" ref=\"queryPanel\">\r\n      <el-table\r\n        :data=\"filterTableList\"\r\n        class=\"tw-table\"\r\n        v-loading=\"table.loading\"\r\n        border\r\n        size=\"small\"\r\n        height=\"calc(100% - 42px)\"\r\n      >\r\n        <el-table-column type=\"index\" label=\"序号\" width=\"60\" align=\"center\" :resizable=\"false\"></el-table-column>\r\n        <el-table-column label=\"公司编码\" prop=\"COMPANY_ID\" align=\"center\" width=\"250\"></el-table-column>\r\n        <el-table-column label=\"APP名称\" prop=\"ABB_NAME\" align=\"center\" width=\"250\"></el-table-column>\r\n        <el-table-column label=\"企业全称\" prop=\"NAME\" align=\"center\" min-width=\"300\"></el-table-column>\r\n        <el-table-column\r\n          label=\"运营状态\"\r\n          :formatter=\"formatterTableState\"\r\n          prop=\"OPERATING\"\r\n          align=\"center\"\r\n          width=\"250\"\r\n        ></el-table-column>\r\n        <el-table-column\r\n          label=\"更新时间\"\r\n          :formatter=\"formatterTableTime\"\r\n          prop=\"DBTIME\"\r\n          align=\"center\"\r\n          width=\"250\"\r\n        ></el-table-column>\r\n        <el-table-column label=\"操作\" align=\"center\" width=\"200\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button @click=\"handleTableEdit(scope.row)\" type=\"primary\" plain size=\"small\">修改</el-button>\r\n            <el-button @click=\"handleTableDel(scope.row.ID)\" type=\"primary\" plain size=\"small\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        background\r\n        :page-size=\"table.pageSize\"\r\n        :current-page=\"table.currentPage\"\r\n        :total=\"table.total\"\r\n        @current-change=\"handleTablePageCurrentChange\"\r\n      ></el-pagination>\r\n    </div>\r\n    <el-dialog\r\n      :title=\"dialog.title\"\r\n      :visible.sync=\"dialog.display\"\r\n      :close-on-click-modal=\"false\"\r\n      custom-class=\"tw-dialog\"\r\n      @close=\"handleClose\"\r\n      width=\"600px\"\r\n    >\r\n      <el-form label-width=\"110px\">\r\n        <el-form-item label=\"公司编码\">\r\n          <el-input v-model=\"dialog.form.gsbm\" placeholder=\"公司编码\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"APP名称\">\r\n          <el-input v-model=\"dialog.form.appName\" placeholder=\"APP名称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"企业全称\">\r\n          <el-input v-model=\"dialog.form.qyqc\" placeholder=\"企业全称\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"运营状态\">\r\n          <el-select class=\"tw-block\" v-model=\"dialog.form.yyzt\" placeholder=\"运营状态\">\r\n            <el-option\r\n              v-for=\"item in dialog.form.yyztOptions\"\r\n              :key=\"item.value\"\r\n              :label=\"item.label\"\r\n              :value=\"item.value\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"handleClose\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submitInfo\">确 定</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport { templateHeight, filterTablePage } from '../../assets/js/util'\r\n\r\nexport default {\r\n  name: 'BusinessOperationRegistration',\r\n  data() {\r\n    return {\r\n      query: {\r\n        abb_name: '',\r\n        name: '',\r\n        yyzt: '2',\r\n        yyztOptions: [{ value: '2', label: '全部' }, { value: '0', label: '在营运' }, { value: '1', label: '未营运' }]\r\n      },\r\n      table: {\r\n        data: [],\r\n        loading: false,\r\n        pageSize: 20,\r\n        currentPage: 1,\r\n        total: 0,\r\n        selectRow: {}\r\n      },\r\n      dialog: {\r\n        title: '',\r\n        display: false,\r\n        form: {\r\n          gsbm: '',\r\n          appName: '',\r\n          qyqc: '',\r\n          yyzt: '',\r\n          yyztOptions: [{ value: '0', label: '在营运' }, { value: '1', label: '未营运' }]\r\n        }\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    filterTableList() {\r\n      return filterTablePage(this.table)\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      const elements = this.$refs['queryBar'].$el\r\n      templateHeight(this.$refs['queryPanel'], elements)\r\n      this.getDataList()\r\n    })\r\n  },\r\n  methods: {\r\n    handleTableEdit(row) {\r\n      this.table.selectRow = row\r\n      this.dialog.display = true\r\n      this.dialog.title = '修改'\r\n      this.editShow()\r\n    },\r\n    // 编辑信息回显\r\n    editShow() {\r\n      const { ABB_NAME, NAME, OPERATING, COMPANY_ID } = this.table.selectRow\r\n      this.dialog.form.yyzt = OPERATING\r\n      this.dialog.form.gsbm = COMPANY_ID\r\n      this.dialog.form.appName = ABB_NAME\r\n      this.dialog.form.qyqc = NAME\r\n    },\r\n    handleTableDel(id) {\r\n      const baseURL = this.baseURL\r\n      this.$confirm('确定删除吗?', '提示', {\r\n        confirmButtonText: '是',\r\n        cancelButtonText: '否',\r\n        cancelButtonClass: 'el-button--danger',\r\n        closeOnClickModal: false,\r\n        type: 'info',\r\n        center: true\r\n      }).then(() => {\r\n        axios\r\n          .get('data/delBikeCompany', {\r\n            baseURL,\r\n            params: {\r\n              id\r\n            }\r\n          })\r\n          .then(res => {\r\n            if (res.data.msg == '0') {\r\n              this.$message.success('删除成功')\r\n              this.getDataList()\r\n            } else {\r\n              this.$message.success('删除失败')\r\n            }\r\n          })\r\n      })\r\n    },\r\n    formatterTableState(row, a, val) {\r\n      return val == '0' ? '营运中' : val == '1' ? '未营运' : ''\r\n    },\r\n    formatterTableTime(row, a, val) {\r\n      return val ? moment(val).format('YYYY-MM-DD') : ''\r\n    },\r\n    submitInfo() {\r\n      const { gsbm, appName, qyqc, yyzt } = this.dialog.form\r\n      const baseURL = this.baseURL\r\n      if (!gsbm) this.$message.warning('请输入公司编码')\r\n      else if (!appName) this.$message.warning('请输入APP名称')\r\n      else if (!qyqc) this.$message.warning('请输入企业全称')\r\n      else if (!yyzt) this.$message.warning('请选择运营状态')\r\n      else {\r\n        if (this.dialog.title == '添加') {\r\n          axios\r\n            .get('data/addBikeCompany', {\r\n              baseURL,\r\n              params: {\r\n                id: gsbm,\r\n                abb_name: appName,\r\n                name: qyqc,\r\n                operating: yyzt\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res.data.msg == '0') {\r\n                this.$message.success('添加成功')\r\n                this.dialog.display = false\r\n                this.getDataList()\r\n              } else {\r\n                this.$message.success('添加失败')\r\n              }\r\n            })\r\n        } else if (this.dialog.title == '修改') {\r\n          axios\r\n            .get('data/updateBikeCompany', {\r\n              baseURL,\r\n              params: {\r\n                id: gsbm,\r\n                abb_name: appName,\r\n                name: qyqc,\r\n                operating: yyzt,\r\n                jlid: this.table.selectRow.ID\r\n              }\r\n            })\r\n            .then(res => {\r\n              if (res.data.msg == '0') {\r\n                this.$message.success('修改成功')\r\n                this.dialog.display = false\r\n                this.getDataList()\r\n              } else {\r\n                this.$message.success('修改失败')\r\n              }\r\n            })\r\n        }\r\n      }\r\n    },\r\n    handleAddClick() {\r\n      this.dialog.title = '添加'\r\n      this.dialog.display = true\r\n    },\r\n    handleClose() {\r\n      this.dialog.title = ''\r\n      this.dialog.form.gsbm = ''\r\n      this.dialog.form.appName = ''\r\n      this.dialog.form.qyqc = ''\r\n      this.dialog.form.yyzt = ''\r\n      this.dialog.display = false\r\n    },\r\n    getDataList() {\r\n      this.table.loading = true\r\n      const baseURL = this.baseURL\r\n      const { abb_name, name, yyzt } = this.query\r\n      axios\r\n        .get('data/getBikeCompany', {\r\n          baseURL,\r\n          params: {\r\n            operating: yyzt,\r\n            abb_name,\r\n            name\r\n          }\r\n        })\r\n        .then(res => {\r\n          this.table.data = res.data.datas\r\n          this.table.total = res.data.datas.length\r\n          setTimeout(() => {\r\n            this.table.loading = false\r\n          }, 300)\r\n        })\r\n    },\r\n    handleQueryClick() {\r\n      this.getDataList()\r\n    },\r\n    handleTablePageCurrentChange(index) {\r\n      this.table.currentPage = index\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style></style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BusinessOperationRegistration.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./BusinessOperationRegistration.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./BusinessOperationRegistration.vue?vue&type=template&id=d0deace2&\"\nimport script from \"./BusinessOperationRegistration.vue?vue&type=script&lang=js&\"\nexport * from \"./BusinessOperationRegistration.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}