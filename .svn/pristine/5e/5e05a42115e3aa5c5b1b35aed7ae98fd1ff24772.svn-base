(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c5214"],{"3e7c":function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tw-template-wrapper"},[a("el-form",{ref:"queryBar",staticClass:"tw-query-bar",attrs:{inline:!0,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"用户名"},model:{value:e.query.username,callback:function(t){e.$set(e.query,"username",t)},expression:"query.username"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"请选择系统类型"},model:{value:e.query.sysType,callback:function(t){e.$set(e.query,"sysType",t)},expression:"query.sysType"}},e._l(e.query.sysList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetimerange",align:"right","start-placeholder":"开始时间","end-placeholder":"结束时间","default-time":["00:00:00","23:59:59"]},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",loading:e.table.loading},on:{click:e.handleQueryClick}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)],1),a("div",{ref:"queryPanel",staticClass:"tw-query-panel"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"tw-table",attrs:{stripe:"",data:e.table.data,border:"",height:"calc(100% - 42px)"}},[a("el-table-column",{attrs:{prop:"USERNAME",width:"200",align:"center",label:"用户名"}}),a("el-table-column",{attrs:{prop:"HANDLE",width:"650",align:"center",label:"访问模块"}}),a("el-table-column",{attrs:{label:"时间",align:"center","min-width":"200",resizable:!1,formatter:e.formatterTime}})],1),a("el-pagination",{staticClass:"tw-page-bar",attrs:{background:"","page-size":e.table.pageSize,"current-page":e.table.currentPage,total:e.table.total},on:{"current-change":e.handleTablePageCurrentChange}})],1)],1)},n=[],r=a("bc3a"),i=a.n(r),s=a("c1df"),u=a.n(s),o={name:"Record",data:function(){return{query:{sysType:0,sysList:[{value:0,label:"网约车监管服务平台"},{value:1,label:"考试管理系统"},{value:2,label:"申报信息管理系统"},{value:3,label:"互联网申报系统"}],stime:"",etime:"",username:""},table:{data:[],pageSize:30,currentPage:1,total:0,loading:!1},value2:[]}},mounted:function(){var e=this;this.$nextTick((function(){e.query.etime=u()().format("YYYY-MM-DD 23:59:59"),e.query.stime=u()().subtract(1,"days").format("YYYY-MM-DD 00:00:00"),e.value2.push(e.query.stime),e.value2.push(e.query.etime),e.queryTable()}))},methods:{handleExportClick:function(){var e=this;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then((function(){var t=e.query.sysType,a="",l="";e.value2&&(a=u()(e.value2[0]).format("YYYY-MM-DD HH:mm:ss"),l="etime",u()(e.value2[1]).format("YYYY-MM-DD HH:mm:ss")),window.open("".concat(e.baseURL,"user/getLogExcel?condition=").concat(t,"&stime=").concat(a,"&etime=").concat(l))})).catch((function(e){}))},formatterTime:function(e){return u()(e.DBTIME).format("YYYY-MM-DD HH:mm:ss")},handleQueryClick:function(){this.queryTable()},queryTable:function(){var e=this,t=this.value2,a=this.baseURL,l=new URLSearchParams;this.value2?(this.table.loading=!0,l.append("condition",this.query.sysType),l.append("page",this.table.currentPage),l.append("pageSize",this.table.pageSize),l.append("username",this.query.username),t?(l.append("stime",u()(this.value2[0]).format("YYYY-MM-DD HH:mm:ss")),l.append("etime",u()(this.value2[1]).format("YYYY-MM-DD HH:mm:ss"))):(l.append("stime",""),l.append("etime","")),i.a.post("user/getLog",l,{baseURL:a}).then((function(t){e.table.data=t.data.list,e.table.total=t.data.count,setTimeout((function(){e.table.loading=!1}),500)}))):this.$message({message:"请选择时间",type:"warning"})},handleTablePageCurrentChange:function(e){this.table.currentPage=e,this.queryTable()}}},c=o,m=a("2877"),p=Object(m["a"])(c,l,n,!1,null,"686cf58a",null);t["default"]=p.exports}}]);
//# sourceMappingURL=chunk-2d0c5214.1642df24.js.map