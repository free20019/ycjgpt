(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-095d8e66"],{"02f4":function(t,e,a){var n=a("4588"),r=a("be13");t.exports=function(t){return function(e,a){var i,o,s=String(r(e)),l=n(a),c=s.length;return l<0||l>=c?t?"":void 0:(i=s.charCodeAt(l),i<55296||i>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?t?s.charAt(l):i:t?s.slice(l,l+2):o-56320+(i-55296<<10)+65536)}}},"0390":function(t,e,a){"use strict";var n=a("02f4")(!0);t.exports=function(t,e,a){return e+(a?n(t,e).length:1)}},"06c5":function(t,e,a){"use strict";a.d(e,"a",(function(){return r}));var n=a("6b75");function r(t,e){if(t){if("string"===typeof t)return Object(n["a"])(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(n["a"])(t,e):void 0}}},"0bfb":function(t,e,a){"use strict";var n=a("cb7c");t.exports=function(){var t=n(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e}},"214f":function(t,e,a){"use strict";a("b0c5");var n=a("2aba"),r=a("32e9"),i=a("79e5"),o=a("be13"),s=a("2b4c"),l=a("520a"),c=s("species"),u=!i((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),d=function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var a="ab".split(t);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();t.exports=function(t,e,a){var f=s(t),p=!i((function(){var e={};return e[f]=function(){return 7},7!=""[t](e)})),v=p?!i((function(){var e=!1,a=/a/;return a.exec=function(){return e=!0,null},"split"===t&&(a.constructor={},a.constructor[c]=function(){return a}),a[f](""),!e})):void 0;if(!p||!v||"replace"===t&&!u||"split"===t&&!d){var b=/./[f],m=a(o,f,""[t],(function(t,e,a,n,r){return e.exec===l?p&&!r?{done:!0,value:b.call(e,a,n)}:{done:!0,value:t.call(a,e,n)}:{done:!1}})),h=m[0],g=m[1];n(String.prototype,t,h),r(RegExp.prototype,f,2==e?function(t,e){return g.call(t,this,e)}:function(t){return g.call(t,this)})}}},"28a5":function(t,e,a){"use strict";var n=a("aae3"),r=a("cb7c"),i=a("ebd6"),o=a("0390"),s=a("9def"),l=a("5f1b"),c=a("520a"),u=a("79e5"),d=Math.min,f=[].push,p="split",v="length",b="lastIndex",m=4294967295,h=!u((function(){RegExp(m,"y")}));a("214f")("split",2,(function(t,e,a,u){var g;return g="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[v]||2!="ab"[p](/(?:ab)*/)[v]||4!="."[p](/(.?)(.?)/)[v]||"."[p](/()()/)[v]>1||""[p](/.?/)[v]?function(t,e){var r=String(this);if(void 0===t&&0===e)return[];if(!n(t))return a.call(r,t,e);var i,o,s,l=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),d=0,p=void 0===e?m:e>>>0,h=new RegExp(t.source,u+"g");while(i=c.call(h,r)){if(o=h[b],o>d&&(l.push(r.slice(d,i.index)),i[v]>1&&i.index<r[v]&&f.apply(l,i.slice(1)),s=i[0][v],d=o,l[v]>=p))break;h[b]===i.index&&h[b]++}return d===r[v]?!s&&h.test("")||l.push(""):l.push(r.slice(d)),l[v]>p?l.slice(0,p):l}:"0"[p](void 0,0)[v]?function(t,e){return void 0===t&&0===e?[]:a.call(this,t,e)}:a,[function(a,n){var r=t(this),i=void 0==a?void 0:a[e];return void 0!==i?i.call(a,r,n):g.call(String(r),a,n)},function(t,e){var n=u(g,t,this,e,g!==a);if(n.done)return n.value;var c=r(t),f=String(this),p=i(c,RegExp),v=c.unicode,b=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(h?"y":"g"),w=new p(h?c:"^(?:"+c.source+")",b),y=void 0===e?m:e>>>0;if(0===y)return[];if(0===f.length)return null===l(w,f)?[f]:[];var x=0,C=0,E=[];while(C<f.length){w.lastIndex=h?C:0;var _,A=l(w,h?f:f.slice(C));if(null===A||(_=d(s(w.lastIndex+(h?0:C)),f.length))===x)C=o(f,C,v);else{if(E.push(f.slice(x,C)),E.length===y)return E;for(var M=1;M<=A.length-1;M++)if(E.push(A[M]),E.length===y)return E;C=x=_}}return E.push(f.slice(x)),E}]}))},2909:function(t,e,a){"use strict";a.d(e,"a",(function(){return l}));var n=a("6b75");function r(t){if(Array.isArray(t))return Object(n["a"])(t)}function i(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var o=a("06c5");function s(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(t){return r(t)||i(t)||Object(o["a"])(t)||s()}},3835:function(t,e,a){"use strict";function n(t){if(Array.isArray(t))return t}function r(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var a=[],n=!0,r=!1,i=void 0;try{for(var o,s=t[Symbol.iterator]();!(n=(o=s.next()).done);n=!0)if(a.push(o.value),e&&a.length===e)break}catch(l){r=!0,i=l}finally{try{n||null==s["return"]||s["return"]()}finally{if(r)throw i}}return a}}a.d(e,"a",(function(){return s}));var i=a("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t,e){return n(t)||r(t,e)||Object(i["a"])(t,e)||o()}},"3a28":function(t,e,a){},"520a":function(t,e,a){"use strict";var n=a("0bfb"),r=RegExp.prototype.exec,i=String.prototype.replace,o=r,s="lastIndex",l=function(){var t=/a/,e=/b*/g;return r.call(t,"a"),r.call(e,"a"),0!==t[s]||0!==e[s]}(),c=void 0!==/()??/.exec("")[1],u=l||c;u&&(o=function(t){var e,a,o,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",n.call(d))),l&&(e=d[s]),o=r.call(d,t),l&&o&&(d[s]=d.global?o.index+o[0].length:e),c&&o&&o.length>1&&i.call(o[0],a,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),t.exports=o},"5f1b":function(t,e,a){"use strict";var n=a("23c6"),r=RegExp.prototype.exec;t.exports=function(t,e){var a=t.exec;if("function"===typeof a){var i=a.call(t,e);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==n(t))throw new TypeError("RegExp#exec called on incompatible receiver");return r.call(t,e)}},"6b75":function(t,e,a){"use strict";function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,n=new Array(e);a<e;a++)n[a]=t[a];return n}a.d(e,"a",(function(){return n}))},"6e58":function(t,e,a){"use strict";a.d(e,"b",(function(){return o})),a.d(e,"a",(function(){return s}));var n=a("2909"),r=a("afaa"),i={baseURL:"http://192.168.11.238:8080/",url:"arcgis_js_api/library/3.14/"},o={baseMapLayers:[{url:"http://21.15.18.252:6080/arcgis/rest/services/map2016/yellow20160426/MapServer"}],title:"mapLayerPath"};function s(t){var e=i.baseURL,a=i.url,o=e+a;return r["loadCss"]("".concat(o,"esri/css/esri.css")),r["loadModules"]([].concat(Object(n["a"])(t),["dojo/domReady!"]),{url:o+"init.js"})}},9803:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-template-wrapper"},[a("div",{staticClass:"tw-map-left-panel"},[a("el-tabs",{staticClass:"tw-template-height",attrs:{type:"card",stretch:!0},on:{"tab-click":t.tabClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.tab.loading,expression:"tab.loading"}],attrs:{label:"异常热门来源地",name:"first"}},[a("div",{staticClass:"tab-info"},[a("div",{staticClass:"tw-date"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:function(e){return t.getpassengerFlowTo(0)}},model:{value:t.tab.qddate,callback:function(e){t.$set(t.tab,"qddate",e)},expression:"tab.qddate"}})],1),t._l(t.tab.qddata,(function(e,n){return a("div",{key:"qddata_"+n},[a("div",{staticClass:"tw-item",on:{click:function(a){return t.getpassengerFlowToDetailed(0,e)}}},[a("div",{staticClass:"tw-rank"},[t._v(t._s(n+1))]),a("div",{staticClass:"tw-title",class:{active:n==t.tab.index},on:{click:function(e){return t.handleTitle(n)}}},[t._v("\n                "+t._s(e.AREA_NAME)+"("+t._s(e.WYC_NUMBER)+")\n              ")])])])}))],2)]),a("el-tab-pane",{directives:[{name:"loading",rawName:"v-loading",value:t.tab.loading,expression:"tab.loading"}],attrs:{label:"异常热门目的地",name:"second"}},[a("div",{staticClass:"tab-info"},[a("div",{staticClass:"tw-date"},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},on:{change:function(e){return t.getpassengerFlowTo(1)}},model:{value:t.tab.zddate,callback:function(e){t.$set(t.tab,"zddate",e)},expression:"tab.zddate"}})],1),t._l(t.tab.zddata,(function(e,n){return a("div",{key:"zddata_"+n},[a("div",{staticClass:"tw-item",on:{click:function(a){return t.getpassengerFlowToDetailed(1,e)}}},[a("div",{staticClass:"tw-rank"},[t._v(t._s(n+1))]),a("div",{staticClass:"tw-title",class:{active:n==t.tab.index},on:{click:function(e){return t.handleTitle(n)}}},[t._v("\n                "+t._s(e.AREA_NAME)+"("+t._s(e.WYC_NUMBER)+")\n              ")])])])}))],2)])],1)],1),a("div",{staticClass:"map-box",attrs:{id:"arcgisMap"}}),a("div",{staticClass:"tw-map-tool "},[a("el-tabs",{staticClass:"tw-item",attrs:{type:"card"},on:{"tab-click":t.clickDisItem}},t._l(t.disList,(function(e,n){return a("el-tab-pane",{key:"dis_"+n,attrs:{name:e.label}},[a("span",{staticClass:"my-pane",attrs:{slot:"label"},slot:"label"},[a("span",[t._v(t._s(e.label))])])])})),1)],1),a("div",{staticClass:"tw-tips"},[a("div",{ref:"tip",staticClass:"tw-bg"},[t._m(0),t._m(1)]),a("div",{staticClass:"tw-tl",on:{click:function(e){return t.handleTipsShow()}}},[t._v("图例")])])])},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",[t._v("异常热门来源地")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("span",[t._v("异常热门目的地")])])}],i=(a("28a5"),a("7f7f"),a("3835")),o=a("6e58"),s=a("bc3a"),l=a.n(s),c=a("c1df"),u=a.n(c),d={name:"PassengerFlowAnalysis",data:function(){return{map:{arcgisMap:null,levelMap:null,dialog:null},activeName:"first",tab:{qddate:"",zddate:"",qddata:[],zddata:{},loading:!1,index:0},name:"全  部",tabName:0,disList:[{label:"全  部"},{label:"上城区"},{label:"下城区"},{label:"江干区"},{label:"拱墅区"},{label:"西湖区"},{label:"滨江区"},{label:"萧山区"},{label:"余杭区"},{label:"富阳区"},{label:"临安区"}]}},mounted:function(){var t=this;this.$nextTick((function(){t.tab.qddate=u()(new Date((new Date).getTime()-864e5)).format("YYYY-MM-DD"),t.tab.zddate=u()(new Date((new Date).getTime()-864e5)).format("YYYY-MM-DD");try{Object(o["a"])(["esri/map","esri/basemaps","esri/layers/GraphicsLayer","dijit/TooltipDialog","esri/dijit/Scalebar"]).then((function(e){var a=Object(i["a"])(e,5),n=a[0],r=a[1],s=a[2],l=a[3],c=a[4];r.mapLayerPath=o["b"],t.map.arcgisMap=new n("arcgisMap",{basemap:"mapLayerPath",spatialReference:{wkid:4326},center:[120.290262812,30.268283139],zoom:4}),t.map.arcgisMap.on("load",(function(){t.getpassengerFlowTo(0),t.map.dialog=new l({style:"position: absolute; width: 500px; font: normal normal normal 10pt Helvetica;z-index:100"}),t.map.dialog.startup(),t.map.levelMap=new s({id:"levelmap"}),t.map.arcgisMap.addLayer(t.map.levelMap),new c({map:t.map.arcgisMap,scalebarUnit:"dual"})}))}))}catch(e){}}))},methods:{clickDisItem:function(t){this.name=t.name,this.getpassengerFlowTo(1)},handleTitle:function(t){this.tab.index=t},tabClick:function(t){"first"==t.name?(this.tabName=0,this.getpassengerFlowTo()):(this.tabName=1,this.getpassengerFlowTo()),this.tab.index=0},handleTipsShow:function(){this.$refs.tip.offsetWidth>0?this.$refs.tip.style.width="0":this.$refs.tip.style.width="220px"},getpassengerFlowTo:function(t){var e=this,a="";a=0==this.tabName?u()(this.tab.qddate).format("YYYY-MM-DD"):u()(this.tab.zddate).format("YYYY-MM-DD"),this.tab.loading=!0,l.a.get("map/passengerFlowTo",{baseURL:this.baseURL,params:{type:this.tabName,time:a,area:this.name}}).then((function(a){if(console.log(a.data),0==e.tabName?e.tab.qddata=a.data:e.tab.zddata=a.data,a.data.length>0)if(1==t){e.map.levelMap.clear();for(var n=new Array,r=0;r<a.data.length;r++){a.data[r].WYC_COUNT=a.data[r].WYC_NUMBER,n=new Array;for(var i=a.data[r].AREA_COORDINATES.split(";"),o=0;o<i.length;o++){var s=i[o].split(",");n.push([parseFloat(s[0])-.0049,parseFloat(s[1])+.0025])}e.addPolygon(e.tabName,a.data[r],n)}}else e.getpassengerFlowToDetailed(e.tabName,a.data[0]);e.tab.loading=!1}))},getpassengerFlowToDetailed:function(t,e){var a=this;this.map.levelMap.clear(),this.map.arcgisMap.centerAndZoom([parseFloat(e.CENTER.split(",")[0]),parseFloat(e.CENTER.split(",")[1])],5);var n="";n=0==t?u()(this.tab.qddate).format("YYYY-MM-DD"):u()(this.tab.zddate).format("YYYY-MM-DD"),this.tab.loading=!0;for(var r=e.AREA_COORDINATES.split(";"),i=[],o=0;o<r.length;o++){var s=r[o].split(",");i.push([parseFloat(s[0])-.0049,parseFloat(s[1])+.0025])}e.WYC_COUNT=e.WYC_NUMBER,0==t?this.addPolygon(0,e,i):this.addPolygon(1,e,i),l.a.get("map/passengerFlowToDetailed",{baseURL:this.baseURL,params:{type:t,time:n,id:e.AREA_ID}}).then((function(e){a.tab.loading=!1;for(var n=new Array,r=0;r<e.data.length;r++){n=new Array;for(var i=e.data[r].AREA_COORDINATES.split(";"),o=0;o<i.length;o++){var s=i[o].split(",");n.push([parseFloat(s[0])-.0049,parseFloat(s[1])+.0025])}0==t?a.addPolygon(1,e.data[r],n):a.addPolygon(0,e.data[r],n)}}))},addPolygon:function(t,e,a){var n=this;Object(o["a"])(["esri/graphic","esri/InfoTemplate","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/Color"]).then((function(r){var o=Object(i["a"])(r,6),s=o[0],l=o[1],c=o[2],u=o[3],d=o[4],f=o[5],p=new l;p.setTitle("区域名  ${AREA_NAME}"),p.setContent("订单数量： ${WYC_COUNT}");var v={rings:[a],spatialReference:{wkid:4326}},b=new c(v),m=[];m=0==t?[18,115,208,.7]:[122,32,163,.7],n.map.levelMap.add(new s(b,new u(u.STYLE_SOLID,new d(d.STYLE_SOLID,new f([42,242,255,.35]),1),new f(m)),e,p))}))}}},f=d,p=(a("e259"),a("2877")),v=Object(p["a"])(f,n,r,!1,null,"35edebef",null);e["default"]=v.exports},aae3:function(t,e,a){var n=a("d3f4"),r=a("2d95"),i=a("2b4c")("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==r(t))}},afaa:function(t,e,a){(function(t,a){a(e)})(0,(function(t){"use strict";var e="4.16",a="next";function n(t){if(t.toLowerCase()===a)return a;var e=t&&t.match(/^(\d)\.(\d+)/);return e&&{major:parseInt(e[1],10),minor:parseInt(e[2],10)}}function r(t){return void 0===t&&(t=e),"https://js.arcgis.com/"+t+"/"}function i(t){void 0===t&&(t=e);var i=r(t),o=n(t);if(o!==a&&3===o.major){var s=o.minor<=10?"js/":"";return""+i+s+"esri/css/esri.css"}return i+"esri/themes/light/main.css"}function o(t){var e=document.createElement("link");return e.rel="stylesheet",e.href=t,e}function s(t,e){if(e){var a=document.querySelector(e);a.parentNode.insertBefore(t,a)}else document.head.appendChild(t)}function l(t){return document.querySelector('link[href*="'+t+'"]')}function c(t){return!t||n(t)?i(t):t}function u(t,e){var a=c(t),n=l(a);return n||(n=o(a),s(n,e)),n}var d="undefined"!==typeof window,f={Promise:d?window["Promise"]:void 0},p={};function v(t){var e=document.createElement("script");return e.type="text/javascript",e.src=t,e.setAttribute("data-esri-loader","loading"),e}function b(t,e,a){var n;a&&(n=m(t,a));var r=function(){e(t),t.removeEventListener("load",r,!1),n&&t.removeEventListener("error",n,!1)};t.addEventListener("load",r,!1)}function m(t,e){var a=function(n){e(n.error||new Error("There was an error attempting to load "+t.src)),t.removeEventListener("error",a,!1)};return t.addEventListener("error",a,!1),a}function h(t){void 0===t&&(t={}),p=t}function g(){return document.querySelector("script[data-esri-loader]")}function w(){var t=window["require"];return t&&t.on}function y(t){void 0===t&&(t={});var e={};[p,t].forEach((function(t){for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}));var a=e.version,n=e.url||r(a);return new f.Promise((function(t,r){var i=g();if(i){var o=i.getAttribute("src");o!==n?r(new Error("The ArcGIS API for JavaScript is already loaded ("+o+").")):w()?t(i):b(i,t,r)}else if(w())r(new Error("The ArcGIS API for JavaScript is already loaded."));else{var s=e.css;if(s){var l=!0===s;u(l?a:s,e.insertCssBefore)}e.dojoConfig&&(window["dojoConfig"]=e.dojoConfig),i=v(n),b(i,(function(){i.setAttribute("data-esri-loader","loaded"),t(i)}),r),document.body.appendChild(i)}}))}function x(t){return new f.Promise((function(e,a){var n=window["require"].on("error",a);window["require"](t,(function(){for(var t=[],a=0;a<arguments.length;a++)t[a]=arguments[a];n.remove(),e(t)}))}))}function C(t,e){if(void 0===e&&(e={}),w())return x(t);var a=g(),n=a&&a.getAttribute("src");return!e.url&&n&&(e.url=n),y(e).then((function(){return x(t)}))}var E={getScript:g,isLoaded:w,loadModules:C,loadScript:y,loadCss:u,setDefaultOptions:h,utils:f};t.getScript=g,t.isLoaded=w,t.loadModules=C,t.loadScript=y,t.loadCss=u,t.setDefaultOptions=h,t.utils=f,t["default"]=E,Object.defineProperty(t,"__esModule",{value:!0})}))},b0c5:function(t,e,a){"use strict";var n=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})},e259:function(t,e,a){"use strict";var n=a("3a28"),r=a.n(n);r.a}}]);
//# sourceMappingURL=chunk-095d8e66.a7cd80ef.js.map