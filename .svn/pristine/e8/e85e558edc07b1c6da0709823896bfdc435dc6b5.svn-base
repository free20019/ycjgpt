(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f59cf7a0"],{2759:function(t,e,a){"use strict";var n=a("5897"),i=a.n(n);i.a},5897:function(t,e,a){},bbd5:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return r})),a.d(e,"d",(function(){return l})),a.d(e,"a",(function(){return o}));a("5c96");var n=a("c46f");function i(t){return 0===t.indexOf("icon-")?"iconfont ".concat(t):0===t.indexOf("el-icon-")?t:""}function r(t){var e=0;return t instanceof Array||t.offsetHeight?(t instanceof Array?n["a"].each(t,(function(t){try{e+=parseInt(t.offsetHeight)}catch(a){console.error(a)}})):e=parseInt(t.offsetHeight),"calc(100% - ".concat(e,"px)")):""}function l(t,e,a){a&&a(),t.style.height=r(e),window.addEventListener("resize",(function(){t.style.height=r(e),a&&a()}))}function o(t){var e=t.data,a=t.pageSize,i=t.currentPage,r=i-1;return n["a"].filter(e,(function(t,e){return e>=r*a&&e<i*a}))}},d975:function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"tw-template-wrapper",staticStyle:{"overflow-y":"auto"}},[a("el-form",{ref:"queryBar",staticClass:"tw-query-bar",attrs:{inline:!0,model:t.query,size:"small"}},[a("el-form-item",[a("el-date-picker",{attrs:{type:"date",placeholder:"查询时间"},model:{value:t.query.time,callback:function(e){t.$set(t.query,"time",e)},expression:"query.time"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:t.handleQueryClick}},[t._v("查询")])],1)],1),a("div",{staticClass:"tw-query-table"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],attrs:{data:t.table.data,border:"",size:"small","row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{label:"平台公司",prop:"ABB_NAME",align:"center","min-width":"130"}}),a("el-table-column",{attrs:{label:"单车日均订单",prop:"ORDER_AVE",align:"center",width:"250"}}),a("el-table-column",{attrs:{label:"单车日均营收",prop:"PRICE_AVE",align:"center",width:"250"}}),a("el-table-column",{attrs:{label:"单车日均载客里程",prop:"MILE_AVE",align:"center",width:"250"}}),a("el-table-column",{attrs:{label:"单车日均载客时长",prop:"DUR_AVE",align:"center",width:"250"}})],1),a("el-radio-group",{staticStyle:{"margin-top":"20px"},attrs:{size:"small"},on:{change:t.getEchartData},model:{value:t.query.radio,callback:function(e){t.$set(t.query,"radio",e)},expression:"query.radio"}},[a("el-radio-button",{attrs:{label:"ORDER_AVE"}},[t._v("订单")]),a("el-radio-button",{attrs:{label:"PRICE_AVE"}},[t._v("营收")]),a("el-radio-button",{attrs:{label:"MILE_AVE"}},[t._v("里程")]),a("el-radio-button",{attrs:{label:"DUR_AVE"}},[t._v("时长")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.table.loading,expression:"table.loading"}],ref:"queryEchart",staticClass:"tw-echart-content"},[a("div",{staticClass:"tw-echart",attrs:{id:"echart"}})])],1)},i=[],r=a("c1df"),l=a.n(r),o=a("313e"),c=a.n(o),s=(a("bbd5"),a("bc3a")),u=a.n(s),d=a("c46f"),f={name:"BicycleIncomeAnalysis",data:function(){return{query:{time:l()(new Date).add(-1,"days"),radio:"ORDER_AVE"},table:{data:[],loading:!1,pageSize:30,total:0,currentPage:1,selectRow:{}},echart:null}},mounted:function(){var t=this;this.$nextTick((function(){window.onresize=function(){t.echart.resize()},t.getTableData(),t.getEchartData()}))},methods:{tableRowClassName:function(t){var e=t.row;t.rowIndex;return console.info(e),e.ABB_NAME.indexOf("平均")>-1?"important-row":""},handleQueryClick:function(){this.getTableData(),this.getEchartData()},getEchartData:function(){var t=this,e=this.baseURL,a=this.query.time;u.a.get("data/getBikeEcharts",{baseURL:e,params:{time:a?l()(a).format("YYYY-MM-DD"):""}}).then((function(e){t.initEcharts(e.data,t.query.radio)}))},getTableData:function(){var t=this,e=this.baseURL,a=this.query.time;this.table.loading=!0,u.a.get("data/getBikeAnalysis",{baseURL:e,params:{time:a?l()(a).format("YYYY-MM-DD"):""}}).then((function(e){t.table.data=e.data.datas,t.table.loading=!1}))},initEcharts:function(t,e){var a=t.yesterDay,n=t.today,i=t.lastMonth,r=t.lastWeek;this.echart=c.a.init(document.getElementById("echart")),this.echart.setOption({legend:{data:["当日","昨日","上周","上月"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},tooltip:{trigger:"axis"},xAxis:{type:"category",axisLabel:{rotate:40,boundaryGap:!1},data:a.length>0?d["a"].pluck(a,"ABB_NAME"):n.length>0?d["a"].pluck(n,"ABB_NAME"):i.length>0?d["a"].pluck(i,"ABB_NAME"):r.length>0?d["a"].pluck(r,"ABB_NAME"):[]},yAxis:{type:"value"},series:[{name:"当日",type:"line",data:d["a"].pluck(n,e)},{name:"昨日",type:"line",data:d["a"].pluck(a,e)},{name:"上周",type:"line",data:d["a"].pluck(r,e)},{name:"上月",type:"line",data:d["a"].pluck(i,e)}]})}}},h=f,b=(a("2759"),a("2877")),p=Object(b["a"])(h,n,i,!1,null,"289eb3e2",null);e["default"]=p.exports}}]);
//# sourceMappingURL=chunk-f59cf7a0.1b50e96c.js.map