(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50cf1ba0"],{"369c":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tw-template-wrapper"},[a("el-form",{ref:"queryBar",staticClass:"tw-query-bar",attrs:{inline:!0,model:e.query,size:"small"}},[a("el-form-item",[a("el-autocomplete",{staticClass:"inline-input",attrs:{"fetch-suggestions":e.handleQuerySearch,placeholder:"车牌号码","trigger-on-focus":!1,clearable:""},on:{focus:e.handleCarfocus},model:{value:e.query.vehicleNumber,callback:function(t){e.$set(e.query,"vehicleNumber",t)},expression:"query.vehicleNumber"}})],1),a("el-form-item",[a("el-select",{attrs:{placeholder:"违规类型"},model:{value:e.query.violationType,callback:function(t){e.$set(e.query,"violationType",t)},expression:"query.violationType"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),a("el-option",{attrs:{label:"已超期",value:"1"}}),a("el-option",{attrs:{label:"即将超期",value:"2"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleExportClick}},[e._v("导出")])],1)],1),a("div",{ref:"queryPanel",staticClass:"tw-query-panel"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"tw-table",attrs:{data:e.table.data,border:"",height:"calc(100% - 52px)"}},[a("el-table-column",{attrs:{align:"center",type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{align:"center",prop:"AUTO_NUM",label:"车牌号码",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"OWNER",label:"车辆所有人",width:"240"}}),a("el-table-column",{attrs:{align:"center",prop:"OWNER_TEL",label:"联系电话",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"LICENSE_REGISTER_DATE",label:"行驶证注册日期",width:"160"}}),a("el-table-column",{attrs:{align:"center",prop:"START_DATE",label:"有效开始日期",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"END_DATE",label:"有效截止日期",width:"180"}}),a("el-table-column",{attrs:{align:"center",prop:"TYPE",label:"状态","min-width":"180"}})],1),a("el-pagination",{staticStyle:{"margin-bottom":"10px"},attrs:{background:"","page-size":e.table.pageSize,"current-page":e.table.currentPage,total:e.table.total},on:{"current-change":e.handleTablePageCurrentChange}})],1)],1)},r=[],i=a("c46f"),l=a("bc3a"),c=a.n(l),o=(a("c1df"),a("9ca8")),u=a("bbd5"),s={name:"VehicleOverdueWarning",data:function(){return{query:{vehicleNumber:"",violationType:"1"},table:{loading:!1,data:[],pageSize:20,currentPage:1,total:0},chart:{data:[]}}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs["queryBar"].$el;Object(u["d"])(e.$refs["queryPanel"],t,(function(){})),e.getVehicleOverdueWarning()}))},computed:{chartResize:function(){return this.$store.state.secondary},chartOptions:function(){var e=i["a"].pluck(this.chart.data,"TIME"),t=i["a"].pluck(this.chart.data,"COUNT");return{title:{text:"注册车辆数"},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{},xAxis:{data:e},yAxis:{type:"value"},series:[{data:t,type:"bar"}]}}},methods:{getVehicleOverdueWarning:function(){var e=this;this.table.loading=!0;var t=this.query,a=t.vehicleNumber,n=t.violationType,r=this.table,i=r.currentPage,l=r.pageSize;c.a.get("getOperationAndWarningAction/getVehicleOverdueWarning",{baseURL:this.baseURL,params:{vehicleNumber:a,Situation:n,page:i,pageSize:l}}).then((function(t){e.table.data=t.data.datas||[],e.table.total=t.data.count,e.table.loading=!1,e.chart.data=t.data.echarts}))},handleQuerySearch:function(e,t){e.length>=5&&c.a.get("getOperationAndWarningAction/getVehicleOverdueWarningVehicleNumber",{baseURL:this.baseURL,params:{PLATE_NUMBER:this.query.vehicleNumber}}).then((function(e){for(var a=e.data,n=0;n<a.length;n++)a[n].value=a[n].PLATE_NUMBER;t(a)}))},handleCarfocus:function(){""===this.query.vehicleNumber&&(this.query.vehicleNumber="浙A")},handleQueryClick:function(){this.table.currentPage=1,this.getVehicleOverdueWarning()},handleTablePageCurrentChange:function(e){this.table.currentPage=e,this.getVehicleOverdueWarning()},handleExportClick:function(){var e=this;this.$confirm("是否需要导出?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then((function(){window.open("".concat(e.baseURL,"getOperationAndWarningAction/exportVehicleOverdueWarning?vehicleNumber=").concat(e.query.vehicleNumber,"&Situation=").concat(e.query.violationType,"&page=1&pageSize=100"))})).catch((function(){}))}},components:{"v-chart":o["a"]},watch:{"$route.path":{handler:function(e,t){this.query.violationType="1",this.getVehicleOverdueWarning()}}}},h=s,d=(a("7e95"),a("2877")),p=Object(d["a"])(h,n,r,!1,null,"84c763a8",null);t["default"]=p.exports},"7e95":function(e,t,a){"use strict";var n=a("91dd"),r=a.n(n);r.a},"91dd":function(e,t,a){},bbd5:function(e,t,a){"use strict";a.d(t,"c",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return l})),a.d(t,"a",(function(){return c}));a("5c96");var n=a("c46f");function r(e){return 0===e.indexOf("icon-")?"iconfont ".concat(e):0===e.indexOf("el-icon-")?e:""}function i(e){var t=0;return e instanceof Array||e.offsetHeight?(e instanceof Array?n["a"].each(e,(function(e){try{t+=parseInt(e.offsetHeight)}catch(a){console.error(a)}})):t=parseInt(e.offsetHeight),"calc(100% - ".concat(t,"px)")):""}function l(e,t,a){a&&a(),e.style.height=i(t),window.addEventListener("resize",(function(){e.style.height=i(t),a&&a()}))}function c(e){var t=e.data,a=e.pageSize,r=e.currentPage,i=r-1;return n["a"].filter(t,(function(e,t){return t>=i*a&&t<r*a}))}}}]);
//# sourceMappingURL=chunk-50cf1ba0.9722536f.js.map