(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6262f028"],{bbd5:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"b",(function(){return n})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return s}));a("5c96");var l=a("c46f");function i(e){return 0===e.indexOf("icon-")?"iconfont ".concat(e):0===e.indexOf("el-icon-")?e:""}function n(e){var t=0;return e instanceof Array||e.offsetHeight?(e instanceof Array?l["a"].each(e,(function(e){try{t+=parseInt(e.offsetHeight)}catch(a){console.error(a)}})):t=parseInt(e.offsetHeight),"calc(100% - ".concat(t,"px)")):""}function o(e,t,a){a&&a(),e.style.height=n(t),window.addEventListener("resize",(function(){e.style.height=n(t),a&&a()}))}function s(e){var t=e.data,a=e.pageSize,i=e.currentPage,n=i-1;return l["a"].filter(t,(function(e,t){return t>=n*a&&t<i*a}))}},c951:function(e,t,a){"use strict";a.r(t);var l=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tw-template-wrapper"},[a("el-form",{ref:"queryBar",staticClass:"tw-query-bar",attrs:{inline:!0,model:e.query,size:"small"}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"APP名称",clearable:""},model:{value:e.query.abb_name,callback:function(t){e.$set(e.query,"abb_name",t)},expression:"query.abb_name"}})],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"企业全称",clearable:""},model:{value:e.query.name,callback:function(t){e.$set(e.query,"name",t)},expression:"query.name"}})],1),a("el-form-item",[a("el-select",{staticClass:"tw-block",attrs:{placeholder:"运营状态"},model:{value:e.query.yyzt,callback:function(t){e.$set(e.query,"yyzt",t)},expression:"query.yyzt"}},e._l(e.query.yyztOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleQueryClick}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.handleAddClick}},[e._v("添加企业")])],1)],1),a("div",{ref:"queryPanel",staticClass:"tw-query-panel"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"tw-table",attrs:{data:e.filterTableList,border:"",size:"small",height:"calc(100% - 42px)"}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60",align:"center",resizable:!1}}),a("el-table-column",{attrs:{label:"公司编码",prop:"COMPANY_ID",align:"center",width:"250"}}),a("el-table-column",{attrs:{label:"APP名称",prop:"ABB_NAME",align:"center",width:"250"}}),a("el-table-column",{attrs:{label:"企业全称",prop:"NAME",align:"center","min-width":"300"}}),a("el-table-column",{attrs:{label:"运营状态",formatter:e.formatterTableState,prop:"OPERATING",align:"center",width:"250"}}),a("el-table-column",{attrs:{label:"更新时间",formatter:e.formatterTableTime,prop:"DBTIME",align:"center",width:"250"}}),a("el-table-column",{attrs:{label:"操作",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(a){return e.handleTableEdit(t.row)}}},[e._v("修改")]),a("el-button",{attrs:{type:"primary",plain:"",size:"small"},on:{click:function(a){return e.handleTableDel(t.row.ID)}}},[e._v("删除")])]}}])})],1),a("el-pagination",{attrs:{background:"","page-size":e.table.pageSize,"current-page":e.table.currentPage,total:e.table.total},on:{"current-change":e.handleTablePageCurrentChange}})],1),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.display,"close-on-click-modal":!1,"custom-class":"tw-dialog",width:"600px"},on:{"update:visible":function(t){return e.$set(e.dialog,"display",t)},close:e.handleClose}},[a("el-form",{attrs:{"label-width":"110px"}},[a("el-form-item",{attrs:{label:"公司编码"}},[a("el-input",{attrs:{placeholder:"公司编码"},model:{value:e.dialog.form.gsbm,callback:function(t){e.$set(e.dialog.form,"gsbm",t)},expression:"dialog.form.gsbm"}})],1),a("el-form-item",{attrs:{label:"APP名称"}},[a("el-input",{attrs:{placeholder:"APP名称"},model:{value:e.dialog.form.appName,callback:function(t){e.$set(e.dialog.form,"appName",t)},expression:"dialog.form.appName"}})],1),a("el-form-item",{attrs:{label:"企业全称"}},[a("el-input",{attrs:{placeholder:"企业全称"},model:{value:e.dialog.form.qyqc,callback:function(t){e.$set(e.dialog.form,"qyqc",t)},expression:"dialog.form.qyqc"}})],1),a("el-form-item",{attrs:{label:"运营状态"}},[a("el-select",{staticClass:"tw-block",attrs:{placeholder:"运营状态"},model:{value:e.dialog.form.yyzt,callback:function(t){e.$set(e.dialog.form,"yyzt",t)},expression:"dialog.form.yyzt"}},e._l(e.dialog.form.yyztOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submitInfo}},[e._v("确 定")])],1)],1)],1)},i=[],n=(a("7f7f"),a("bc3a")),o=a.n(n),s=a("c1df"),r=a.n(s),c=a("bbd5"),u={name:"BusinessOperationRegistration",data:function(){return{query:{abb_name:"",name:"",yyzt:"2",yyztOptions:[{value:"2",label:"全部"},{value:"0",label:"在营运"},{value:"1",label:"未营运"}]},table:{data:[],loading:!1,pageSize:20,currentPage:1,total:0,selectRow:{}},dialog:{title:"",display:!1,form:{gsbm:"",appName:"",qyqc:"",yyzt:"",yyztOptions:[{value:"0",label:"在营运"},{value:"1",label:"未营运"}]}}}},computed:{filterTableList:function(){return Object(c["a"])(this.table)}},mounted:function(){var e=this;this.$nextTick((function(){var t=e.$refs["queryBar"].$el;Object(c["d"])(e.$refs["queryPanel"],t),e.getDataList()}))},methods:{handleTableEdit:function(e){this.table.selectRow=e,this.dialog.display=!0,this.dialog.title="修改",this.editShow()},editShow:function(){var e=this.table.selectRow,t=e.ABB_NAME,a=e.NAME,l=e.OPERATING,i=e.COMPANY_ID;this.dialog.form.yyzt=l,this.dialog.form.gsbm=i,this.dialog.form.appName=t,this.dialog.form.qyqc=a},handleTableDel:function(e){var t=this,a=this.baseURL;this.$confirm("确定删除吗?","提示",{confirmButtonText:"是",cancelButtonText:"否",cancelButtonClass:"el-button--danger",closeOnClickModal:!1,type:"info",center:!0}).then((function(){o.a.get("data/delBikeCompany",{baseURL:a,params:{id:e}}).then((function(e){"0"==e.data.msg?(t.$message.success("删除成功"),t.getDataList()):t.$message.success("删除失败")}))}))},formatterTableState:function(e,t,a){return"0"==a?"营运中":"1"==a?"未营运":""},formatterTableTime:function(e,t,a){return a?r()(a).format("YYYY-MM-DD"):""},submitInfo:function(){var e=this,t=this.dialog.form,a=t.gsbm,l=t.appName,i=t.qyqc,n=t.yyzt,s=this.baseURL;a?l?i?n?"添加"==this.dialog.title?o.a.get("data/addBikeCompany",{baseURL:s,params:{id:a,abb_name:l,name:i,operating:n}}).then((function(t){"0"==t.data.msg?(e.$message.success("添加成功"),e.dialog.display=!1,e.getDataList()):e.$message.success("添加失败")})):"修改"==this.dialog.title&&o.a.get("data/updateBikeCompany",{baseURL:s,params:{id:a,abb_name:l,name:i,operating:n,jlid:this.table.selectRow.ID}}).then((function(t){"0"==t.data.msg?(e.$message.success("修改成功"),e.dialog.display=!1,e.getDataList()):e.$message.success("修改失败")})):this.$message.warning("请选择运营状态"):this.$message.warning("请输入企业全称"):this.$message.warning("请输入APP名称"):this.$message.warning("请输入公司编码")},handleAddClick:function(){this.dialog.title="添加",this.dialog.display=!0},handleClose:function(){this.dialog.title="",this.dialog.form.gsbm="",this.dialog.form.appName="",this.dialog.form.qyqc="",this.dialog.form.yyzt="",this.dialog.display=!1},getDataList:function(){var e=this;this.table.loading=!0;var t=this.baseURL,a=this.query,l=a.abb_name,i=a.name,n=a.yyzt;o.a.get("data/getBikeCompany",{baseURL:t,params:{operating:n,abb_name:l,name:i}}).then((function(t){e.table.data=t.data.datas,e.table.total=t.data.datas.length,setTimeout((function(){e.table.loading=!1}),300)}))},handleQueryClick:function(){this.getDataList()},handleTablePageCurrentChange:function(e){this.table.currentPage=e}}},d=u,m=a("2877"),b=Object(m["a"])(d,l,i,!1,null,null,null);t["default"]=b.exports}}]);
//# sourceMappingURL=chunk-6262f028.4fc981f0.js.map