(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bc39a4b"],{"02f4":function(e,t,a){var i=a("4588"),r=a("be13");e.exports=function(e){return function(t,a){var n,o,s=String(r(t)),l=i(a),c=s.length;return l<0||l>=c?e?"":void 0:(n=s.charCodeAt(l),n<55296||n>56319||l+1===c||(o=s.charCodeAt(l+1))<56320||o>57343?e?s.charAt(l):n:e?s.slice(l,l+2):o-56320+(n-55296<<10)+65536)}}},"11e9":function(e,t,a){var i=a("52a7"),r=a("4630"),n=a("6821"),o=a("6a99"),s=a("69a8"),l=a("c69a"),c=Object.getOwnPropertyDescriptor;t.f=a("9e1e")?c:function(e,t){if(e=n(e),t=o(t,!0),l)try{return c(e,t)}catch(a){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},"5dbc":function(e,t,a){var i=a("d3f4"),r=a("8b97").set;e.exports=function(e,t,a){var n,o=t.constructor;return o!==a&&"function"==typeof o&&(n=o.prototype)!==a.prototype&&i(n)&&r&&r(e,n),e}},"5df3":function(e,t,a){"use strict";var i=a("02f4")(!0);a("01f9")(String,"String",(function(e){this._t=String(e),this._i=0}),(function(){var e,t=this._t,a=this._i;return a>=t.length?{value:void 0,done:!0}:(e=i(t,a),this._i+=e.length,{value:e,done:!1})}))},"67ab":function(e,t,a){var i=a("ca5a")("meta"),r=a("d3f4"),n=a("69a8"),o=a("86cc").f,s=0,l=Object.isExtensible||function(){return!0},c=!a("79e5")((function(){return l(Object.preventExtensions({}))})),u=function(e){o(e,i,{value:{i:"O"+ ++s,w:{}}})},f=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!n(e,i)){if(!l(e))return"F";if(!t)return"E";u(e)}return e[i].i},p=function(e,t){if(!n(e,i)){if(!l(e))return!0;if(!t)return!1;u(e)}return e[i].w},d=function(e){return c&&m.NEED&&l(e)&&!n(e,i)&&u(e),e},m=e.exports={KEY:i,NEED:!1,fastKey:f,getWeak:p,onFreeze:d}},"8b97":function(e,t,a){var i=a("d3f4"),r=a("cb7c"),n=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=a("9b43")(Function.call,a("11e9").f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(r){t=!0}return function(e,a){return n(e,a),t?e.__proto__=a:i(e,a),e}}({},!1):void 0),check:n}},ab08:function(e,t,a){},b39a:function(e,t,a){var i=a("d3f4");e.exports=function(e,t){if(!i(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},c26b:function(e,t,a){"use strict";var i=a("86cc").f,r=a("2aeb"),n=a("dcbc"),o=a("9b43"),s=a("f605"),l=a("4a59"),c=a("01f9"),u=a("d53b"),f=a("7a56"),p=a("9e1e"),d=a("67ab").fastKey,m=a("b39a"),h=p?"_s":"size",v=function(e,t){var a,i=d(t);if("F"!==i)return e._i[i];for(a=e._f;a;a=a.n)if(a.k==t)return a};e.exports={getConstructor:function(e,t,a,c){var u=e((function(e,i){s(e,u,t,"_i"),e._t=t,e._i=r(null),e._f=void 0,e._l=void 0,e[h]=0,void 0!=i&&l(i,a,e[c],e)}));return n(u.prototype,{clear:function(){for(var e=m(this,t),a=e._i,i=e._f;i;i=i.n)i.r=!0,i.p&&(i.p=i.p.n=void 0),delete a[i.i];e._f=e._l=void 0,e[h]=0},delete:function(e){var a=m(this,t),i=v(a,e);if(i){var r=i.n,n=i.p;delete a._i[i.i],i.r=!0,n&&(n.n=r),r&&(r.p=n),a._f==i&&(a._f=r),a._l==i&&(a._l=n),a[h]--}return!!i},forEach:function(e){m(this,t);var a,i=o(e,arguments.length>1?arguments[1]:void 0,3);while(a=a?a.n:this._f){i(a.v,a.k,this);while(a&&a.r)a=a.p}},has:function(e){return!!v(m(this,t),e)}}),p&&i(u.prototype,"size",{get:function(){return m(this,t)[h]}}),u},def:function(e,t,a){var i,r,n=v(e,t);return n?n.v=a:(e._l=n={i:r=d(t,!0),k:t,v:a,p:i=e._l,n:void 0,r:!1},e._f||(e._f=n),i&&(i.n=n),e[h]++,"F"!==r&&(e._i[r]=n)),e},getEntry:v,setStrong:function(e,t,a){c(e,t,(function(e,a){this._t=m(e,t),this._k=a,this._l=void 0}),(function(){var e=this,t=e._k,a=e._l;while(a&&a.r)a=a.p;return e._t&&(e._l=a=a?a.n:e._t._f)?u(0,"keys"==t?a.k:"values"==t?a.v:[a.k,a.v]):(e._t=void 0,u(1))}),a?"entries":"values",!a,!0),f(t)}}},d5a5:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{ref:"wrapper",staticClass:"tw-template-wrapper",on:{mousemove:e.handleMouseMove,mouseup:e.handleMouseUp}},[a("div",{ref:"moveMap",staticClass:"map-box"},[a("div",{staticStyle:{height:"100%"},attrs:{id:"arcgisMap"}})]),a("div",{ref:"moveTable",staticClass:"query-table"},[a("div",{staticClass:"move-line",on:{mousedown:e.handleMouseDown}}),a("el-form",{ref:"queryBar",attrs:{inline:!0,size:"mini"}},[a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"平台名称"},model:{value:e.query.company,callback:function(t){e.$set(e.query,"company",t)},expression:"query.company"}},e._l(e.companyList,(function(e){return a("el-option",{attrs:{label:e.ABB_NAME,value:e.COMPANYID}})})),1)],1),a("el-form-item",[a("el-autocomplete",{attrs:{"fetch-suggestions":e.queryVehicleSearch,placeholder:"车牌号码","trigger-on-focus":!1,clearable:""},model:{value:e.query.vehino,callback:function(t){e.$set(e.query,"vehino",t)},expression:"query.vehino"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"开始时间"},model:{value:e.query.stime,callback:function(t){e.$set(e.query,"stime",t)},expression:"query.stime"}})],1),a("el-form-item",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"结束时间"},model:{value:e.query.etime,callback:function(t){e.$set(e.query,"etime",t)},expression:"query.etime"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.getOrder}},[e._v("查询")])],1)],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"queryPanel"},[a("el-table",{attrs:{data:e.table.order,border:"",size:"mini",height:"100%"},on:{"row-click":e.getHistor}},[a("el-table-column",{attrs:{prop:"ABB_NAME",label:"平台名称",width:"120"}}),a("el-table-column",{attrs:{prop:"ORDERID",label:"订单编号",width:"120"}}),a("el-table-column",{attrs:{prop:"DRIVERNAME",label:"驾驶员姓名",width:"120"}}),a("el-table-column",{attrs:{prop:"LICENSEID",label:"驾驶证号",width:"160"}}),a("el-table-column",{attrs:{prop:"VEHICLENO",label:"车辆号牌",width:"120"}}),a("el-table-column",{attrs:{prop:"DEPAREA",label:"上车地点",width:"260"}}),a("el-table-column",{attrs:{prop:"DEPTIME",label:"上车时间",width:"160",formatter:e.fomarttime}}),a("el-table-column",{attrs:{prop:"DESTAREA",label:"下车地点",width:"160"}}),a("el-table-column",{attrs:{prop:"DESTTIME",label:"下车时间",width:"160",formatter:e.fomarttime}}),a("el-table-column",{attrs:{prop:"FACTPRICE",label:"实收金额(元)",width:"100"}}),a("el-table-column",{attrs:{prop:"DRIVETIME",label:"载客时间（秒）",width:"110"}}),a("el-table-column",{attrs:{prop:"DRIVEMILE",label:"载客里程（千米）","min-width":"140"}})],1)],1)],1)])},r=[],n=(a("ac6a"),a("5df3"),a("f400"),a("3835")),o=a("6e58"),s=a("bbd5"),l=a("bc3a"),c=a.n(l),u=a("c1df"),f=a.n(u),p=a("1157"),d=a.n(p),m=(a("c46f"),{name:"CrossAreaManagementMonitor",data:function(){return{map:{arcgisMap:null,levelMap:null,dialog:null},loading:!1,mapQueryPanel:!1,tableType:!1,query:{vehino:"",stime:"",etime:"",company:""},table:{monitor:[],order:[]},data:[],options:[],compname:"",clickFlag:!1,move:{},companyList:[]}},mounted:function(){var e=this;this.$nextTick((function(){var t=e;e.getCompSelect(),e.mapQueryPanel=!0,e.query.stime=f()().subtract(1,"days").format("YYYY-MM-DD 00:00:00"),e.query.etime=f()().subtract(1,"days").format("YYYY-MM-DD 24:00:00"),e.query.vehino=e.$route.params.vhic;var a=e.$refs["queryBar"].$el;Object(s["d"])(e.$refs["queryPanel"],a),e.getOrder();try{Object(o["a"])(["esri/map","esri/basemaps","esri/layers/GraphicsLayer","esri/lang","dijit/TooltipDialog","dijit/popup","dojo/dom-style"]).then((function(a){var i=Object(n["a"])(a,7),r=i[0],s=i[1],l=i[2],c=i[3],u=i[4],f=i[5],p=i[6];s.mapLayerPath=o["b"],e.map.arcgisMap=new r("arcgisMap",{basemap:"mapLayerPath",spatialReference:{wkid:4326},center:[120.197521,30.24298],zoom:13}),e.map.arcgisMap.on("load",(function(){e.map.arcgisMap.infoWindow.resize(100,125),e.map.dialog=new u({style:"position: absolute; width: 350px; font: normal normal normal 10pt Helvetica;z-index:100"}),e.map.dialog.startup(),e.map.levelMap=new l({id:"levelmap"}),e.map.arcgisMap.addLayer(e.map.levelMap),t.map.arcgisMap.on("zoom",(function(){d()(".mapDialog").hide(),f.close(t.map.dialog)})),t.map.arcgisMap.on("pan-start",(function(){d()(".mapDialog").hide(),f.close(t.map.dialog)})),e.map.levelMap.on("click",(function(e){var a=e.graphic.attributes,i="",r="";e.graphic.symbol.url.indexOf("start")>=0?(i=t.fomarttime1(a.DEPTIME),r=a.DEPAREA):(i=t.fomarttime1(a.DESTTIME),r=a.DESTAREA);var n='<div class="mapDialog" style=""><div class="mapToolPanel"><TitleCircle><HyperCircle></HyperCircle>网约车-'+a.VEHICLENO+'<HyperCircle></HyperCircle><i class="iconfont icon-close"></i></TitleCircle><div class="normBox" type="left"><div class="normTitle">GPS时间</div><div class="normInfo sbig">'+i+'</div></div><div class="normBox" type="left"><div class="normTitle">所属公司</div><div class="normInfo sbig">'+a.ABB_NAME+'</div></div><div class="normBox" type="left"><div class="normTitle">地址</div><div class="normInfo sbig">'+r+'</div></div><div class="normBox" type="left"><div class="normTitle">订单编号</div><div class="normInfo sbig">'+a.ORDERID+"</div></div></div></div></div>",o=c.substitute(e.graphic.attributes,n);t.map.dialog.setContent(o),p.set(t.map.dialog.domNode,"opacity",.85),f.open({popup:t.map.dialog,x:e.pageX,y:e.pageY}),d()(".icon-close").click((function(){d()(".mapDialog").hide(),f.close(t.map.dialog)}))}))}))}))}catch(i){}}))},methods:{getCompSelect:function(){var e=this;c.a.get("map/compSelect",{baseURL:this.baseURL}).then((function(t){e.companyList=t.data}))},handleMouseMove:function(e){if(this.clickFlag){var t=e.clientY-50;if(t>200){if(this.$refs.moveMap.style.height=e.clientY-50+"px",this.$refs.moveTable.style.height="calc(100% - ".concat(t,"px)"),this.activeFlagA){var a=this.$refs["queryBar"].$el;Object(s["d"])(this.$refs["queryPanel"],a)}if(this.activeFlagB){var i=this.$refs["queryBar"].$el;Object(s["d"])(this.$refs["queryPanelB"],i)}}}},handleMouseUp:function(e){this.clickFlag=!1},handleMouseDown:function(e){console.info("最大高度",this.$refs.wrapper.clientHeight),console.info("地图高度",this.$refs.moveMap),console.info("表格高度",this.$refs.moveTable),this.clickFlag=!0},fomarttime:function(e,t,a){return f()(a).format("YYYY-MM-DD HH:mm:ss")},fomarttime1:function(e){return f()(e).format("YYYY-MM-DD HH:mm:ss")},fomarttype:function(e,t,a){return"1"==a?"载客":"2"==a?"接单":"3"==a?"空驶":"4"==a?"停运":void 0},fomarttype1:function(e){return"1"==e?"载客":"2"==e?"接单":"3"==e?"空驶":"4"==e?"停运":void 0},fomartfx:function(e,t,a){return 0==a||360==a?"正北":90==a?"正东":180==a?"正南":270==a?"正西":a>0&&a<90?"东北":a>90&&a<180?"东南":a>180&&a<270?"西南":a>270&&a<360?"西北":void 0},iconClassName:s["c"],handleMapQueryPanelDisplayClick:function(){this.mapQueryPanel=!this.mapQueryPanel},queryVehicleSearch:function(e,t){e.length<3?t([]):c.a.get("map/getVhic",{baseURL:this.baseURL,params:{vhic:this.query.vehino}}).then((function(e){for(var a=[],i=0;i<e.data.length;i++)a.push({id:e.data[i].VEHICLENO,lable:e.data[i].VEHICLENO,value:e.data[i].VEHICLENO});t(a)}))},getOrder:function(){var e=this;c.a.get("map/getOverRange",{baseURL:this.baseURL,params:{vhic:this.query.vehino,stime:this.fomarttime1(this.query.stime),etime:this.fomarttime1(this.query.etime),company:this.query.company}}).then((function(t){e.table.order=t.data||[]}))},getHistor:function(e){this.map.levelMap.clear();var t=[];t.push([e.DEPLONGITUDE-.0049,e.DEPLATITUDE+.0025]),t.push([e.DESTLONGITUDE-.0049,e.DESTLATITUDE+.0025]),this.addline(t),this.addmar(e,0),this.addmar(e,1),this.map.arcgisMap.centerAndZoom([parseFloat(e.DEPLONGITUDE)-.0049,parseFloat(e.DEPLATITUDE)+.0025],6)},unique:function(e,t){var a=new Map;return e.filter((function(e){return!a.has(e[t])&&a.set(e[t],1)}))},historUtil:function(){},handleChangeClick:function(){this.tableType=!this.tableType},addmar:function(e,t){var a=this;Object(o["a"])(["esri/geometry/Point","esri/graphic","esri/symbols/PictureMarkerSymbol"]).then((function(i){var r=Object(n["a"])(i,3),o=r[0],s=r[1],l=r[2],c=null,u=null;0==t?(c=l(a.baseURL+"image/histor/start.png",35,35).setOffset(0,0),u=new o({x:e.DEPLONGITUDE-.0049,y:e.DEPLATITUDE+.0025,spatialReference:{wkid:4326}})):1==t?(c=l(a.baseURL+"image/histor/end.png",35,35).setOffset(0,0),u=new o({x:e.DESTLONGITUDE-.0049,y:e.DESTLATITUDE+.0025,spatialReference:{wkid:4326}})):c=2==t?l(a.baseURL+"image/histor/gjz.png",25,25).setOffset(0,0).setAngle(e.DIRECTION-90).setOffset(0,0):l(a.baseURL+"image/histor/gj.png",25,25).setAngle(e.DIRECTION-90).setOffset(0,0);var f=new s(u,c,e,"");a.map.levelMap.add(f)}))},addline:function(e){var t=this;Object(o["a"])(["esri/geometry/Polyline","esri/symbols/SimpleLineSymbol","esri/Color","esri/graphic"]).then((function(a){var i=Object(n["a"])(a,4),r=i[0],o=i[1],s=i[2],l=i[3],c={paths:[e],spatialReference:{wkid:4326}},u=new r(c),f=new o(o.STYLE_SOLID,new s([19,242,50,1]),2);f.markok="all";var p=new l(u,f);t.map.levelMap.add(p)}))}},watch:{"$route.path":{handler:function(e,t){this.query.stime=f()().subtract(1,"days").format("YYYY-MM-DD 00:00:00"),this.query.etime=f()().subtract(1,"days").format("YYYY-MM-DD 24:00:00"),this.getOrder()}}}}),h=m,v=(a("e3d3"),a("2877")),b=Object(v["a"])(h,i,r,!1,null,"66eda4b6",null);t["default"]=b.exports},e0b8:function(e,t,a){"use strict";var i=a("7726"),r=a("5ca1"),n=a("2aba"),o=a("dcbc"),s=a("67ab"),l=a("4a59"),c=a("f605"),u=a("d3f4"),f=a("79e5"),p=a("5cc5"),d=a("7f20"),m=a("5dbc");e.exports=function(e,t,a,h,v,b){var y=i[e],g=y,E=v?"set":"add",D=g&&g.prototype,w={},_=function(e){var t=D[e];n(D,e,"delete"==e||"has"==e?function(e){return!(b&&!u(e))&&t.call(this,0===e?0:e)}:"get"==e?function(e){return b&&!u(e)?void 0:t.call(this,0===e?0:e)}:"add"==e?function(e){return t.call(this,0===e?0:e),this}:function(e,a){return t.call(this,0===e?0:e,a),this})};if("function"==typeof g&&(b||D.forEach&&!f((function(){(new g).entries().next()})))){var M=new g,T=M[E](b?{}:-0,1)!=M,O=f((function(){M.has(1)})),I=p((function(e){new g(e)})),k=!b&&f((function(){var e=new g,t=5;while(t--)e[E](t,t);return!e.has(-0)}));I||(g=t((function(t,a){c(t,g,e);var i=m(new y,t,g);return void 0!=a&&l(a,v,i[E],i),i})),g.prototype=D,D.constructor=g),(O||k)&&(_("delete"),_("has"),v&&_("get")),(k||T)&&_(E),b&&D.clear&&delete D.clear}else g=h.getConstructor(t,e,v,E),o(g.prototype,a),s.NEED=!0;return d(g,e),w[e]=g,r(r.G+r.W+r.F*(g!=y),w),b||h.setStrong(g,e,v),g}},e3d3:function(e,t,a){"use strict";var i=a("ab08"),r=a.n(i);r.a},f400:function(e,t,a){"use strict";var i=a("c26b"),r=a("b39a"),n="Map";e.exports=a("e0b8")(n,(function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}}),{get:function(e){var t=i.getEntry(r(this,n),e);return t&&t.v},set:function(e,t){return i.def(r(this,n),0===e?0:e,t)}},i,!0)}}]);
//# sourceMappingURL=chunk-3bc39a4b.83c4e839.js.map