(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c89dbec4"],{"02f4":function(e,t,a){var r=a("4588"),n=a("be13");e.exports=function(e){return function(t,a){var i,o,l=String(n(t)),s=r(a),c=l.length;return s<0||s>=c?e?"":void 0:(i=l.charCodeAt(s),i<55296||i>56319||s+1===c||(o=l.charCodeAt(s+1))<56320||o>57343?e?l.charAt(s):i:e?l.slice(s,s+2):o-56320+(i-55296<<10)+65536)}}},"0390":function(e,t,a){"use strict";var r=a("02f4")(!0);e.exports=function(e,t,a){return t+(a?r(e,t).length:1)}},"06c5":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var r=a("6b75");function n(e,t){if(e){if("string"===typeof e)return Object(r["a"])(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?Object(r["a"])(e,t):void 0}}},"0bfb":function(e,t,a){"use strict";var r=a("cb7c");e.exports=function(){var e=r(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t}},"1e0f":function(e,t,a){},"214f":function(e,t,a){"use strict";a("b0c5");var r=a("2aba"),n=a("32e9"),i=a("79e5"),o=a("be13"),l=a("2b4c"),s=a("520a"),c=l("species"),u=!i((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),d=function(){var e=/(?:)/,t=e.exec;e.exec=function(){return t.apply(this,arguments)};var a="ab".split(e);return 2===a.length&&"a"===a[0]&&"b"===a[1]}();e.exports=function(e,t,a){var f=l(e),p=!i((function(){var t={};return t[f]=function(){return 7},7!=""[e](t)})),m=p?!i((function(){var t=!1,a=/a/;return a.exec=function(){return t=!0,null},"split"===e&&(a.constructor={},a.constructor[c]=function(){return a}),a[f](""),!t})):void 0;if(!p||!m||"replace"===e&&!u||"split"===e&&!d){var h=/./[f],g=a(o,f,""[e],(function(e,t,a,r,n){return t.exec===s?p&&!n?{done:!0,value:h.call(t,a,r)}:{done:!0,value:e.call(a,t,r)}:{done:!1}})),v=g[0],b=g[1];r(String.prototype,e,v),n(RegExp.prototype,f,2==t?function(e,t){return b.call(e,this,t)}:function(e){return b.call(e,this)})}}},"28a5":function(e,t,a){"use strict";var r=a("aae3"),n=a("cb7c"),i=a("ebd6"),o=a("0390"),l=a("9def"),s=a("5f1b"),c=a("520a"),u=a("79e5"),d=Math.min,f=[].push,p="split",m="length",h="lastIndex",g=4294967295,v=!u((function(){RegExp(g,"y")}));a("214f")("split",2,(function(e,t,a,u){var b;return b="c"=="abbc"[p](/(b)*/)[1]||4!="test"[p](/(?:)/,-1)[m]||2!="ab"[p](/(?:ab)*/)[m]||4!="."[p](/(.?)(.?)/)[m]||"."[p](/()()/)[m]>1||""[p](/.?/)[m]?function(e,t){var n=String(this);if(void 0===e&&0===t)return[];if(!r(e))return a.call(n,e,t);var i,o,l,s=[],u=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),d=0,p=void 0===t?g:t>>>0,v=new RegExp(e.source,u+"g");while(i=c.call(v,n)){if(o=v[h],o>d&&(s.push(n.slice(d,i.index)),i[m]>1&&i.index<n[m]&&f.apply(s,i.slice(1)),l=i[0][m],d=o,s[m]>=p))break;v[h]===i.index&&v[h]++}return d===n[m]?!l&&v.test("")||s.push(""):s.push(n.slice(d)),s[m]>p?s.slice(0,p):s}:"0"[p](void 0,0)[m]?function(e,t){return void 0===e&&0===t?[]:a.call(this,e,t)}:a,[function(a,r){var n=e(this),i=void 0==a?void 0:a[t];return void 0!==i?i.call(a,n,r):b.call(String(n),a,r)},function(e,t){var r=u(b,e,this,t,b!==a);if(r.done)return r.value;var c=n(e),f=String(this),p=i(c,RegExp),m=c.unicode,h=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),y=new p(v?c:"^(?:"+c.source+")",h),w=void 0===t?g:t>>>0;if(0===w)return[];if(0===f.length)return null===s(y,f)?[f]:[];var _=0,A=0,x=[];while(A<f.length){y.lastIndex=v?A:0;var E,S=s(y,v?f:f.slice(A));if(null===S||(E=d(l(y.lastIndex+(v?0:A)),f.length))===_)A=o(f,A,m);else{if(x.push(f.slice(_,A)),x.length===w)return x;for(var R=1;R<=S.length-1;R++)if(x.push(S[R]),x.length===w)return x;A=_=E}}return x.push(f.slice(_)),x}]}))},2909:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a("6b75");function n(e){if(Array.isArray(e))return Object(r["a"])(e)}function i(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var o=a("06c5");function l(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return n(e)||i(e)||Object(o["a"])(e)||l()}},3835:function(e,t,a){"use strict";function r(e){if(Array.isArray(e))return e}function n(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,n=!1,i=void 0;try{for(var o,l=e[Symbol.iterator]();!(r=(o=l.next()).done);r=!0)if(a.push(o.value),t&&a.length===t)break}catch(s){n=!0,i=s}finally{try{r||null==l["return"]||l["return"]()}finally{if(n)throw i}}return a}}a.d(t,"a",(function(){return l}));var i=a("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function l(e,t){return r(e)||n(e,t)||Object(i["a"])(e,t)||o()}},4771:function(e,t,a){"use strict";var r=a("1e0f"),n=a.n(r);n.a},"520a":function(e,t,a){"use strict";var r=a("0bfb"),n=RegExp.prototype.exec,i=String.prototype.replace,o=n,l="lastIndex",s=function(){var e=/a/,t=/b*/g;return n.call(e,"a"),n.call(t,"a"),0!==e[l]||0!==t[l]}(),c=void 0!==/()??/.exec("")[1],u=s||c;u&&(o=function(e){var t,a,o,u,d=this;return c&&(a=new RegExp("^"+d.source+"$(?!\\s)",r.call(d))),s&&(t=d[l]),o=n.call(d,e),s&&o&&(d[l]=d.global?o.index+o[0].length:t),c&&o&&o.length>1&&i.call(o[0],a,(function(){for(u=1;u<arguments.length-2;u++)void 0===arguments[u]&&(o[u]=void 0)})),o}),e.exports=o},"5f1b":function(e,t,a){"use strict";var r=a("23c6"),n=RegExp.prototype.exec;e.exports=function(e,t){var a=e.exec;if("function"===typeof a){var i=a.call(e,t);if("object"!==typeof i)throw new TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==r(e))throw new TypeError("RegExp#exec called on incompatible receiver");return n.call(e,t)}},"6b75":function(e,t,a){"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}a.d(t,"a",(function(){return r}))},"6e58":function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return l}));var r=a("2909"),n=a("afaa"),i={baseURL:"http://192.168.11.238:8080/",url:"arcgis_js_api/library/3.14/"},o={baseMapLayers:[{url:"http://21.15.18.252:6080/arcgis/rest/services/map2016/yellow20160426/MapServer"}],title:"mapLayerPath"};function l(e){var t=i.baseURL,a=i.url,o=t+a;return n["loadCss"]("".concat(o,"esri/css/esri.css")),n["loadModules"]([].concat(Object(r["a"])(e),["dojo/domReady!"]),{url:o+"init.js"})}},aae3:function(e,t,a){var r=a("d3f4"),n=a("2d95"),i=a("2b4c")("match");e.exports=function(e){var t;return r(e)&&(void 0!==(t=e[i])?!!t:"RegExp"==n(e))}},afaa:function(e,t,a){(function(e,a){a(t)})(0,(function(e){"use strict";var t="4.16",a="next";function r(e){if(e.toLowerCase()===a)return a;var t=e&&e.match(/^(\d)\.(\d+)/);return t&&{major:parseInt(t[1],10),minor:parseInt(t[2],10)}}function n(e){return void 0===e&&(e=t),"https://js.arcgis.com/"+e+"/"}function i(e){void 0===e&&(e=t);var i=n(e),o=r(e);if(o!==a&&3===o.major){var l=o.minor<=10?"js/":"";return""+i+l+"esri/css/esri.css"}return i+"esri/themes/light/main.css"}function o(e){var t=document.createElement("link");return t.rel="stylesheet",t.href=e,t}function l(e,t){if(t){var a=document.querySelector(t);a.parentNode.insertBefore(e,a)}else document.head.appendChild(e)}function s(e){return document.querySelector('link[href*="'+e+'"]')}function c(e){return!e||r(e)?i(e):e}function u(e,t){var a=c(e),r=s(a);return r||(r=o(a),l(r,t)),r}var d="undefined"!==typeof window,f={Promise:d?window["Promise"]:void 0},p={};function m(e){var t=document.createElement("script");return t.type="text/javascript",t.src=e,t.setAttribute("data-esri-loader","loading"),t}function h(e,t,a){var r;a&&(r=g(e,a));var n=function(){t(e),e.removeEventListener("load",n,!1),r&&e.removeEventListener("error",r,!1)};e.addEventListener("load",n,!1)}function g(e,t){var a=function(r){t(r.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",a,!1)};return e.addEventListener("error",a,!1),a}function v(e){void 0===e&&(e={}),p=e}function b(){return document.querySelector("script[data-esri-loader]")}function y(){var e=window["require"];return e&&e.on}function w(e){void 0===e&&(e={});var t={};[p,e].forEach((function(e){for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a])}));var a=t.version,r=t.url||n(a);return new f.Promise((function(e,n){var i=b();if(i){var o=i.getAttribute("src");o!==r?n(new Error("The ArcGIS API for JavaScript is already loaded ("+o+").")):y()?e(i):h(i,e,n)}else if(y())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var l=t.css;if(l){var s=!0===l;u(s?a:l,t.insertCssBefore)}t.dojoConfig&&(window["dojoConfig"]=t.dojoConfig),i=m(r),h(i,(function(){i.setAttribute("data-esri-loader","loaded"),e(i)}),n),document.body.appendChild(i)}}))}function _(e){return new f.Promise((function(t,a){var r=window["require"].on("error",a);window["require"](e,(function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];r.remove(),t(e)}))}))}function A(e,t){if(void 0===t&&(t={}),y())return _(e);var a=b(),r=a&&a.getAttribute("src");return!t.url&&r&&(t.url=r),w(t).then((function(){return _(e)}))}var x={getScript:b,isLoaded:y,loadModules:A,loadScript:w,loadCss:u,setDefaultOptions:v,utils:f};e.getScript=b,e.isLoaded=y,e.loadModules=A,e.loadScript=w,e.loadCss=u,e.setDefaultOptions=v,e.utils=f,e["default"]=x,Object.defineProperty(e,"__esModule",{value:!0})}))},b0c5:function(e,t,a){"use strict";var r=a("520a");a("5ca1")({target:"RegExp",proto:!0,forced:r!==/./.exec},{exec:r})},bbd5:function(e,t,a){"use strict";a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return i})),a.d(t,"d",(function(){return o})),a.d(t,"a",(function(){return l}));a("5c96");var r=a("c46f");function n(e){return 0===e.indexOf("icon-")?"iconfont ".concat(e):0===e.indexOf("el-icon-")?e:""}function i(e){var t=0;return e instanceof Array||e.offsetHeight?(e instanceof Array?r["a"].each(e,(function(e){try{t+=parseInt(e.offsetHeight)}catch(a){console.error(a)}})):t=parseInt(e.offsetHeight),"calc(100% - ".concat(t,"px)")):""}function o(e,t,a){a&&a(),e.style.height=i(t),window.addEventListener("resize",(function(){e.style.height=i(t),a&&a()}))}function l(e){var t=e.data,a=e.pageSize,n=e.currentPage,i=n-1;return r["a"].filter(t,(function(e,t){return t>=i*a&&t<n*a}))}},c1a3:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"tw-template-wrapper"},[a("div",{staticClass:"tw-map-box",staticStyle:{height:"60%"},attrs:{id:"arcgisMap"}}),a("div",{staticClass:"mp-querybar",staticStyle:{height:"25px"}},[a("el-form",{attrs:{size:"small"}},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.addarea}},[e._v("添加")])],1)],1)],1),a("div",{ref:"queryPanel",staticClass:"tw-query-panel",staticStyle:{height:"calc(40% - 25px)"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.table.loading,expression:"table.loading"}],staticClass:"tw-table",attrs:{data:e.areaList,border:"",size:"small",height:"calc(100%)"},on:{"row-click":e.trowclick}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"60"}}),a("el-table-column",{attrs:{prop:"AREA_NAME",label:"区域名称","min-width":"140"}}),a("el-table-column",{attrs:{prop:"AREA_NUM",label:"当前车辆数",width:"180"}}),a("el-table-column",{attrs:{prop:"AREA_AVG_NUM",label:"最大车辆数","min-width":"140",resizable:!1}}),a("el-table-column",{attrs:{prop:"AREA_NUM",label:"操作",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{staticClass:"table-button",attrs:{type:"text",icon:"el-icon-edit",size:"small"},on:{click:function(a){return e.handleEditClick(t.row)}}}),a("el-button",{staticClass:"table-button",attrs:{type:"text",icon:"el-icon-delete",size:"small"},on:{click:function(a){return e.handleDeleteClick(t.row.AREA_ID)}}})]}}])})],1)],1),a("el-dialog",{attrs:{title:e.dialog.title,visible:e.dialog.display},on:{"update:visible":function(t){return e.$set(e.dialog,"display",t)},close:e.handleDialogClose}},[a("el-form",{attrs:{model:e.dialog.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"区域名称"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.area_name,callback:function(t){e.$set(e.dialog.form,"area_name",t)},expression:"dialog.form.area_name"}})],1),a("el-form-item",{attrs:{label:"区域描述"}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:e.dialog.form.area_ms,callback:function(t){e.$set(e.dialog.form,"area_ms",t)},expression:"dialog.form.area_ms"}})],1),a("el-form-item",{attrs:{label:"区域坐标"}},[a("el-input",{attrs:{autocomplete:"off",disabled:!0},model:{value:e.dialog.form.area_zb,callback:function(t){e.$set(e.dialog.form,"area_zb",t)},expression:"dialog.form.area_zb"}})],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialog.display=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.handleDialogSaveClick}},[e._v("确 定")])],1)],1)],1)},n=[],i=(a("28a5"),a("3835")),o=a("bc3a"),l=a.n(o),s=a("c46f"),c=a("6e58"),u=a("bbd5"),d={name:"SpecificAreaManage",data:function(){return{map:{arcgisMap:null,levelMap:null,toolbar_map:null},areaList:[],table:{loading:!1},dialog:{display:!1,title:"",form:{area_id:"",area_name:"",area_ms:"",area_zb:""}}}},mounted:function(){var e=this;this.$nextTick((function(){try{Object(c["a"])(["esri/map","esri/basemaps","esri/layers/GraphicsLayer","esri/toolbars/draw"]).then((function(t){var a=Object(i["a"])(t,4),r=a[0],n=a[1],o=a[2],l=a[3];n.mapLayerPath=c["b"],e.map.arcgisMap=new r("arcgisMap",{basemap:"mapLayerPath",spatialReference:{wkid:4326},center:[120.197521,30.24298],zoom:6}),e.map.arcgisMap.on("load",(function(){e.map.levelMap=new o({id:"levelmap"}),e.map.arcgisMap.addLayer(e.map.levelMap),e.getAreaList(),e.map.toolbar_map=new l(e.map.arcgisMap)}))}))}catch(t){}}))},methods:{iconClassName:u["c"],getAreaList:function(){var e=this;l.a.get("map/getArea",{baseURL:this.baseURL}).then((function(t){e.map.levelMap.clear(),e.areaList=t.data,s["a"].each(e.areaList,(function(t){for(var a=new Array,r=t.AREA_ZB.split(";"),n=0;n<r.length;n++){var i=r[n].split(",");"1"==t.INSERT_TYPE?a.push([parseFloat(i[0])-.0049,parseFloat(i[1])+.0025]):a.push([parseFloat(i[0]),parseFloat(i[1])])}e.addPolygon(t,a)}))}))},addPolygon:function(e,t){var a=this;Object(c["a"])(["esri/graphic","esri/InfoTemplate","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/Color"]).then((function(r){var n=Object(i["a"])(r,6),o=n[0],l=n[1],s=n[2],c=n[3],u=n[4],d=n[5],f=new l;f.setTitle("区域名  ${AREA_NAME}"),f.setContent("区域描述： ${AREA_MS}");var p={rings:[t],spatialReference:{wkid:4326}},m=new s(p);a.map.levelMap.add(new o(m,new c(c.STYLE_SOLID,new u(u.STYLE_SOLID,new d([42,242,255,.35]),1),new d([244,67,54,.6])),e,f))}))},addarea:function(){var e=this;Object(c["a"])(["esri/toolbars/draw"]).then((function(t){var a=Object(i["a"])(t,1),r=a[0];e.map.toolbar_map.on("draw-end",e.addToMap),e.map.toolbar_map.activate(r.POLYGON),e.map.levelMap.clear()}))},addToMap:function(e){var t=this;Object(c["a"])(["esri/symbols/SimpleMarkerSymbol","esri/symbols/SimpleLineSymbol","esri/symbols/SimpleFillSymbol","esri/graphic"]).then((function(a){var r,n=Object(i["a"])(a,4),o=n[0],l=n[1],s=n[2],c=n[3];switch(t.map.toolbar_map.deactivate(),e.geometry.type){case"point":case"multipoint":r=new o;break;case"polyline":r=new l;break;default:r=new s;break}var u=new c(e.geometry,r,null,null);t.map.levelMap.add(u);for(var d=t.map.levelMap.graphics.length-1,f="",p=t.map.levelMap.graphics[d].geometry.rings[0],m=0;m<p.length;m++)m<p.length-1?f+=p[m][0]+","+p[m][1]+";":f+=p[m][0]+","+p[m][1];t.dialog.form.area_zb=f,t.handleAddClick()}))},handleAddClick:function(){this.dialog.display=!0,this.dialog.title="添加区域",this.dialog.form.area_id="",this.dialog.form.area_name="",this.dialog.form.area_ms=""},handleDialogClose:function(){this.dialog.title="",this.dialog.form.area_id="",this.dialog.form.area_name="",this.dialog.form.area_ms="",this.getAreaList()},handleEditClick:function(e){this.dialog.display=!0,this.dialog.title="修改区域",this.dialog.form.area_id=e.AREA_ID,this.dialog.form.area_name=e.AREA_NAME,this.dialog.form.area_ms=e.AREA_MS,this.dialog.form.area_zb=e.AREA_ZB},handleDeleteClick:function(e){var t=this;this.$confirm("此操作将永久删除该区域, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){l.a.get("map/delArea",{baseURL:t.baseURL,params:{area_id:e}}).then((function(e){t.$message(e.data.info),t.getAreaList()}))})).catch((function(){t.$message({type:"info",message:"已取消删除"})}))},handleDialogSaveClick:function(){var e=this;return this.dialog.form.area_name?this.dialog.form.area_ms?(this.dialog.display=!1,void("添加区域"===this.dialog.title?l.a.get("map/addArea",{baseURL:this.baseURL,params:{area_name:this.dialog.form.area_name,area_ms:this.dialog.form.area_ms,area_zb:this.dialog.form.area_zb}}).then((function(t){e.$message(t.data.info),e.getAreaList()})):"修改区域"===this.dialog.title&&l.a.get("map/editArea",{baseURL:this.baseURL,params:{area_name:this.dialog.form.area_name,area_ms:this.dialog.form.area_ms,area_zb:this.dialog.form.area_zb,area_id:this.dialog.form.area_id}}).then((function(t){e.$message(t.data.info),e.getAreaList()})))):this.$message({type:"warning",message:"请输入区域描述"}):this.$message({type:"warning",message:"请输入区域名称"})},trowclick:function(e){var t=this;Object(c["a"])(["esri/geometry/Point"]).then((function(a){var r=Object(i["a"])(a,1),n=r[0],o=e.AREA_ZB.split(";"),l=o[0].split(",");t.map.arcgisMap.centerAndZoom([parseFloat(l[0]),parseFloat(l[1])],9);for(var s=t.map.levelMap.graphics,c=0;c<s.length;c++){if(e.AREA_ID==s[c].attributes.AREA_ID){var u=new n({x:parseFloat(l[0])-.0049,y:parseFloat(l[1])+.0025,spatialReference:{wkid:4326}});t.map.arcgisMap.infoWindow.show(u),t.map.arcgisMap.infoWindow.setFeatures([s[c]])}"1"==e.INSERT_TYPE?t.map.arcgisMap.centerAndZoom([parseFloat(l[0])-.0049,parseFloat(l[1])+.0025],9):t.map.arcgisMap.centerAndZoom([parseFloat(l[0]),parseFloat(l[1])],9)}}))}}},f=d,p=(a("4771"),a("2877")),m=Object(p["a"])(f,r,n,!1,null,"5ce84ba2",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-c89dbec4.439a458a.js.map