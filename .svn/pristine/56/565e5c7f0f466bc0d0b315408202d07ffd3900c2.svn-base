(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c2c7e750"],{"06c5":function(e,a,t){"use strict";t.d(a,"a",(function(){return n}));var i=t("6b75");function n(e,a){if(e){if("string"===typeof e)return Object(i["a"])(e,a);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Object(i["a"])(e,a):void 0}}},"08ad":function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"tw-template-wrapper"},[t("div",{staticClass:"map-info-box"},[t("div",{staticClass:"tw-map-tool search",class:{"show-tool":e.toolFlag1}},[t("el-autocomplete",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag1,expression:"toolFlag1"}],staticClass:"tool-input",attrs:{placeholder:"车牌号码","fetch-suggestions":e.queryVehicleSearch,"trigger-on-focus":!1},model:{value:e.value1,callback:function(a){e.value1=a},expression:"value1"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag1,expression:"toolFlag1"}],staticClass:"tool-btn cx"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleQueryClick(1)}}},[e._v("查询")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag1,expression:"toolFlag1"}],staticClass:"tool-btn"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleClearClick(1)}}},[e._v("清除")])],1)],1),t("div",{staticClass:"tw-map-tool btn"},[t("i",{staticClass:"iconfont icon-menu",on:{click:function(a){return e.showTool(1)}}})]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.map.loading1,expression:"map.loading1"}],staticStyle:{height:"100%"},attrs:{id:"arcgisMap1"}}),t("div",{staticClass:"info-box"},[t("ul",{staticClass:"info-lists"},[t("li",[t("span",[e._v("平台：")]),t("span",[e._v(e._s(e.info.name1))])]),t("hr"),t("li",[t("span",[e._v("状态：")]),t("span",[e._v(e._s(e.info.type1))])]),t("hr"),t("li",[t("span",[e._v("时间：")]),t("span",[e._v(e._s(e.info.time1))])]),t("hr")])])]),t("div",{staticClass:"map-info-box"},[t("div",{staticClass:"tw-map-tool search",class:{"show-tool":e.toolFlag2}},[t("el-autocomplete",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag2,expression:"toolFlag2"}],staticClass:"tool-input",attrs:{"fetch-suggestions":e.queryVehicleSearch,placeholder:"车牌号码","trigger-on-focus":!1},model:{value:e.value2,callback:function(a){e.value2=a},expression:"value2"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag2,expression:"toolFlag2"}],staticClass:"tool-btn cx"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleQueryClick(2)}}},[e._v("查询")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag2,expression:"toolFlag2"}],staticClass:"tool-btn"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleClearClick(2)}}},[e._v("清除")])],1)],1),t("div",{staticClass:"tw-map-tool btn"},[t("i",{staticClass:"iconfont icon-menu",on:{click:function(a){return e.showTool(2)}}})]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.map.loading2,expression:"map.loading2"}],staticStyle:{height:"100%"},attrs:{id:"arcgisMap2"}}),t("div",{staticClass:"info-box"},[t("ul",{staticClass:"info-lists"},[t("li",[t("span",[e._v("平台：")]),t("span",[e._v(e._s(e.info.name2))])]),t("hr"),t("li",[t("span",[e._v("状态：")]),t("span",[e._v(e._s(e.info.type2))])]),t("hr"),t("li",[t("span",[e._v("时间：")]),t("span",[e._v(e._s(e.info.time2))])]),t("hr")])])]),t("div",{staticClass:"map-info-box"},[t("div",{staticClass:"tw-map-tool search",class:{"show-tool":e.toolFlag3}},[t("el-autocomplete",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag3,expression:"toolFlag3"}],staticClass:"tool-input",attrs:{"fetch-suggestions":e.queryVehicleSearch,placeholder:"车牌号码","trigger-on-focus":!1},model:{value:e.value3,callback:function(a){e.value3=a},expression:"value3"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag3,expression:"toolFlag3"}],staticClass:"tool-btn cx"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleQueryClick(3)}}},[e._v("查询")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag3,expression:"toolFlag3"}],staticClass:"tool-btn"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleClearClick(3)}}},[e._v("清除")])],1)],1),t("div",{staticClass:"tw-map-tool btn"},[t("i",{staticClass:"iconfont icon-menu",on:{click:function(a){return e.showTool(3)}}})]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.map.loading3,expression:"map.loading3"}],staticStyle:{height:"100%"},attrs:{id:"arcgisMap3"}}),t("div",{staticClass:"info-box"},[t("ul",{staticClass:"info-lists"},[t("li",[t("span",[e._v("平台：")]),t("span",[e._v(e._s(e.info.name3))])]),t("hr"),t("li",[t("span",[e._v("状态：")]),t("span",[e._v(e._s(e.info.type3))])]),t("hr"),t("li",[t("span",[e._v("时间：")]),t("span",[e._v(e._s(e.info.time3))])]),t("hr")])])]),t("div",{staticClass:"map-info-box"},[t("div",{staticClass:"tw-map-tool search",class:{"show-tool":e.toolFlag4}},[t("el-autocomplete",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag4,expression:"toolFlag4"}],staticClass:"tool-input",attrs:{"fetch-suggestions":e.queryVehicleSearch,placeholder:"车牌号码","trigger-on-focus":!1},model:{value:e.value4,callback:function(a){e.value4=a},expression:"value4"}}),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag4,expression:"toolFlag4"}],staticClass:"tool-btn cx"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleQueryClick(4)}}},[e._v("查询")])],1),t("div",{directives:[{name:"show",rawName:"v-show",value:e.toolFlag4,expression:"toolFlag4"}],staticClass:"tool-btn"},[t("el-button",{attrs:{type:"text"},on:{click:function(a){return e.handleClearClick(4)}}},[e._v("清除")])],1)],1),t("div",{staticClass:"tw-map-tool btn"},[t("i",{staticClass:"iconfont icon-menu",on:{click:function(a){return e.showTool(4)}}})]),t("div",{directives:[{name:"loading",rawName:"v-loading",value:e.map.loading4,expression:"map.loading4"}],staticStyle:{height:"100%"},attrs:{id:"arcgisMap4"}}),t("div",{staticClass:"info-box"},[t("ul",{staticClass:"info-lists"},[t("li",[t("span",[e._v("平台：")]),t("span",[e._v(e._s(e.info.name4))])]),t("hr"),t("li",[t("span",[e._v("状态：")]),t("span",[e._v(e._s(e.info.type4))])]),t("hr"),t("li",[t("span",[e._v("时间：")]),t("span",[e._v(e._s(e.info.time4))])]),t("hr")])])])])},n=[],l=(t("7f7f"),t("3835")),o=t("6e58"),r=t("bc3a"),s=t.n(r),c=t("c1df"),u=t.n(c),p={name:"CarsDynamicMonitor",data:function(){return{map:{loading1:!1,loading2:!1,loading3:!1,loading4:!1,arcgisMap1:null,arcgisMap2:null,arcgisMap3:null,arcgisMap4:null,levelMap1:null,levelMap2:null,levelMap3:null,levelMap4:null,dialog:null,marMap:null,interval1:null,interval2:null,interval3:null,interval4:null,maptime1:"",maptime2:"",maptime3:"",maptime4:""},options1:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],options2:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],options3:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],options4:[{value:1,label:"1"},{value:2,label:"2"},{value:3,label:"3"},{value:4,label:"4"}],value1:"",value2:"",value3:"",value4:"",line:{line1:null,line2:null,line3:null,line4:null},info:{name1:"",time1:"",type1:"",name2:"",time2:"",type2:"",name3:"",time3:"",type3:"",name4:"",time4:"",type4:""},toolFlag1:!0,toolFlag2:!1,toolFlag3:!1,toolFlag4:!1,cphm:"1111111"}},mounted:function(){var e=this;this.$nextTick((function(){e.initMap("arcgisMap1"),e.initMap("arcgisMap2"),e.initMap("arcgisMap3"),e.initMap("arcgisMap4"),setTimeout(e.addlayer,1e3)}))},methods:{showTool:function(e){1===e?this.toolFlag1=!this.toolFlag1:2===e?this.toolFlag2=!this.toolFlag2:3===e?this.toolFlag3=!this.toolFlag3:4===e&&(this.toolFlag4=!this.toolFlag4)},queryVehicleSearch:function(e,a){e.length<3?a([]):s.a.get("map/getVhic",{baseURL:this.baseURL,params:{vhic:e}}).then((function(e){for(var t=[],i=0;i<e.data.length;i++)t.push({id:e.data[i].VEHICLENO,lable:e.data[i].VEHICLENO+"("+e.data[i].ABB_NAME+")",value:e.data[i].VEHICLENO+"("+e.data[i].ABB_NAME+")"});a(t)}))},addlayer:function(){var e=this,a=this.map,t=a.arcgisMap1,i=a.arcgisMap2,n=a.arcgisMap3,r=a.arcgisMap4;Object(o["a"])(["esri/map","esri/basemaps","esri/layers/GraphicsLayer","esri/lang","dijit/TooltipDialog","dijit/popup","dojo/dom-style"]).then((function(a){var o=Object(l["a"])(a,7),s=(o[0],o[1],o[2]);o[3],o[4],o[5],o[6];e.map.levelMap1=new s({id:"levelmap1"}),t.addLayer(e.map.levelMap1),e.map.levelMap2=new s({id:"levelmap2"}),i.addLayer(e.map.levelMap2),e.map.levelMap3=new s({id:"levelmap3"}),n.addLayer(e.map.levelMap3),e.map.levelMap4=new s({id:"levelmap4"}),r.addLayer(e.map.levelMap4)}))},initMap:function(e){var a=this;try{Object(o["a"])(["esri/map","esri/basemaps"]).then((function(t){var i=Object(l["a"])(t,2),n=i[0],r=i[1];r.mapLayerPath=o["b"],a.map[e]=new n(e,{basemap:"mapLayerPath",spatialReference:{wkid:4326},center:[120.197521,30.24298],zoom:5})}))}catch(t){}},handleClearClick:function(e){var a=this.shaixuanMap(e),t=a.level,i=a.interval,n=a.name,l=a.type,o=a.time,r=a.maptime;this.map[t].clear(),this.info[n]="无",this.info[l]="无",this.info[o]="无",clearInterval(this.map[i]),this.map[r]=""},handleQueryClick:function(e){var a=this;if(""!==o){var t=this.shaixuanMap(e),i=t.map,n=t.level,l=t.linemap,o=t.vehino,r=t.interval,c=t.loading,u=t.name,p=t.type,v=t.time,m=t.maptime;""==this.map[m]&&(this.map[m]=this.fomarttime1(new Date((new Date).getTime()-18e5))),this.map[c]=!0,clearInterval(this.map[r]),s.a.get("map/getDynamic",{baseURL:this.baseURL,params:{vehi_no:o,time:this.map[m]}}).then((function(t){if(a.map[c]=!1,a.map[n].clear(),0!=t.data.length){a.map[r]=setInterval((function(){a.handleQueryClick(e)}),3e4);for(var o=[],s=0;s<t.data.length;s++)o.push([t.data[s].LONGITUDE-.0049,t.data[s].LATITUDE+.0025]),0==s?a.addmar(t.data[s],0,n):s==t.data.length-1?(a.addmar(t.data[s],1,n),a.info[u]=t.data[s].ABB_NAME,a.info[p]=a.fomarttype(t.data[s].BIZSTATUS),a.info[v]=a.fomarttime(t.data[s].POSITIONTIME)):a.addmar(t.data[s],2,n);a.line[l]=o,a.addline(a.line[l],n),a.info[u]=t.data[t.data.length-1].ABB_NAME,a.info[p]=a.fomarttype(t.data[t.data.length-1].BIZSTATUS),a.info[v]=a.fomarttime(t.data[t.data.length-1].POSITIONTIME),t.data.length>0&&a.map[i].centerAndZoom([t.data[t.data.length-1].LONGITUDE,t.data[t.data.length-1].LATITUDE],6)}else a.$message({message:"车辆无轨迹！",type:"warning"})}))}else this.$message({message:"车牌号码不能为空！",type:"warning"})},fomarttime:function(e){return u()(e).format("HH:mm:ss")},fomarttype:function(e){return"1"==e?"载客":"2"==e?"接单":"3"==e?"空驶":"4"==e?"停运":void 0},shaixuanMap:function(e){return 1===e?{map:"arcgisMap1",level:"levelMap1",linemap:"line1",vehino:this.value1,interval:"interval1",loading:"loading1",type:"type1",name:"name1",time:"time1",maptime:"maptime1"}:2===e?{map:"arcgisMap2",level:"levelMap2",linemap:"line2",vehino:this.value2,interval:"interval2",loading:"loading2",type:"type2",name:"name2",time:"time2",maptime:"maptime2"}:3===e?{map:"arcgisMap3",level:"levelMap3",linemap:"line3",vehino:this.value3,interval:"interval3",loading:"loading3",type:"type3",name:"name3",time:"time3",maptime:"maptime3"}:4===e?{map:"arcgisMap4",level:"levelMap4",linemap:"line4",vehino:this.value4,interval:"interval4",loading:"loading4",type:"type4",name:"name4",time:"time4",maptime:"maptime4"}:void 0},fomarttime1:function(e){return u()(e).format("YYYY-MM-DD HH:mm:ss")},addmar:function(e,a,t){var i=this;Object(o["a"])(["esri/geometry/Point","esri/graphic","esri/symbols/PictureMarkerSymbol","esri/InfoTemplate"]).then((function(n){var o=Object(l["a"])(n,4),r=o[0],s=o[1],c=o[2],u=o[3],p=new u;p.setTitle("所属平台  ${ABB_NAME}"),p.setContent("<table> <tr><td><b>营运状态:  ${TYPE}</b></td></tr><tr><td><b>定位时间:  ${TIME}</b></td></tr></table>");var v=new r({x:e.LONGITUDE-.0049,y:e.LATITUDE+.0025,spatialReference:{wkid:4326}}),m=null;m=0==a?c(i.baseURL+"image/histor/start.png",30,30).setOffset(0,0):1==a?c(i.baseURL+"image/histor/car.png",40,20).setAngle(e.DIRECTION-90).setOffset(0,0):c(i.baseURL+"image/histor/gj.png",25,25).setAngle(e.DIRECTION-90).setOffset(0,0);var d=new s(v,m,{ABB_NAME:e.ABB_NAME,TIME:i.fomarttime1(e.POSITIONTIME),TYPE:i.fomarttype(e.BIZSTATUS)},p);i.map[t].add(d)}))},addline:function(e,a){var t=this;Object(o["a"])(["esri/geometry/Polyline","esri/symbols/SimpleLineSymbol","esri/Color","esri/graphic"]).then((function(i){var n=Object(l["a"])(i,4),o=n[0],r=n[1],s=n[2],c=n[3],u={paths:[e],spatialReference:{wkid:4326}},p=new o(u),v=new r(r.STYLE_SOLID,new s([19,242,50,1]),2);v.markok="all";var m=new c(p,v);t.map[a].add(m)}))}}},v=p,m=(t("641e"),t("2877")),d=Object(m["a"])(v,i,n,!1,null,"a84fb8c4",null);a["default"]=d.exports},2909:function(e,a,t){"use strict";t.d(a,"a",(function(){return s}));var i=t("6b75");function n(e){if(Array.isArray(e))return Object(i["a"])(e)}function l(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}var o=t("06c5");function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return n(e)||l(e)||Object(o["a"])(e)||r()}},3835:function(e,a,t){"use strict";function i(e){if(Array.isArray(e))return e}function n(e,a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var t=[],i=!0,n=!1,l=void 0;try{for(var o,r=e[Symbol.iterator]();!(i=(o=r.next()).done);i=!0)if(t.push(o.value),a&&t.length===a)break}catch(s){n=!0,l=s}finally{try{i||null==r["return"]||r["return"]()}finally{if(n)throw l}}return t}}t.d(a,"a",(function(){return r}));var l=t("06c5");function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function r(e,a){return i(e)||n(e,a)||Object(l["a"])(e,a)||o()}},"641e":function(e,a,t){"use strict";var i=t("affe"),n=t.n(i);n.a},"6b75":function(e,a,t){"use strict";function i(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,i=new Array(a);t<a;t++)i[t]=e[t];return i}t.d(a,"a",(function(){return i}))},"6e58":function(e,a,t){"use strict";t.d(a,"b",(function(){return o})),t.d(a,"a",(function(){return r}));var i=t("2909"),n=t("afaa"),l={baseURL:"http://192.168.11.238:8080/",url:"arcgis_js_api/library/3.14/"},o={baseMapLayers:[{url:"http://21.15.18.252:6080/arcgis/rest/services/map2016/yellow20160426/MapServer"}],title:"mapLayerPath"};function r(e){var a=l.baseURL,t=l.url,o=a+t;return n["loadCss"]("".concat(o,"esri/css/esri.css")),n["loadModules"]([].concat(Object(i["a"])(e),["dojo/domReady!"]),{url:o+"init.js"})}},afaa:function(e,a,t){(function(e,t){t(a)})(0,(function(e){"use strict";var a="4.16",t="next";function i(e){if(e.toLowerCase()===t)return t;var a=e&&e.match(/^(\d)\.(\d+)/);return a&&{major:parseInt(a[1],10),minor:parseInt(a[2],10)}}function n(e){return void 0===e&&(e=a),"https://js.arcgis.com/"+e+"/"}function l(e){void 0===e&&(e=a);var l=n(e),o=i(e);if(o!==t&&3===o.major){var r=o.minor<=10?"js/":"";return""+l+r+"esri/css/esri.css"}return l+"esri/themes/light/main.css"}function o(e){var a=document.createElement("link");return a.rel="stylesheet",a.href=e,a}function r(e,a){if(a){var t=document.querySelector(a);t.parentNode.insertBefore(e,t)}else document.head.appendChild(e)}function s(e){return document.querySelector('link[href*="'+e+'"]')}function c(e){return!e||i(e)?l(e):e}function u(e,a){var t=c(e),i=s(t);return i||(i=o(t),r(i,a)),i}var p="undefined"!==typeof window,v={Promise:p?window["Promise"]:void 0},m={};function d(e){var a=document.createElement("script");return a.type="text/javascript",a.src=e,a.setAttribute("data-esri-loader","loading"),a}function f(e,a,t){var i;t&&(i=h(e,t));var n=function(){a(e),e.removeEventListener("load",n,!1),i&&e.removeEventListener("error",i,!1)};e.addEventListener("load",n,!1)}function h(e,a){var t=function(i){a(i.error||new Error("There was an error attempting to load "+e.src)),e.removeEventListener("error",t,!1)};return e.addEventListener("error",t,!1),t}function g(e){void 0===e&&(e={}),m=e}function b(){return document.querySelector("script[data-esri-loader]")}function y(){var e=window["require"];return e&&e.on}function w(e){void 0===e&&(e={});var a={};[m,e].forEach((function(e){for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(a[t]=e[t])}));var t=a.version,i=a.url||n(t);return new v.Promise((function(e,n){var l=b();if(l){var o=l.getAttribute("src");o!==i?n(new Error("The ArcGIS API for JavaScript is already loaded ("+o+").")):y()?e(l):f(l,e,n)}else if(y())n(new Error("The ArcGIS API for JavaScript is already loaded."));else{var r=a.css;if(r){var s=!0===r;u(s?t:r,a.insertCssBefore)}a.dojoConfig&&(window["dojoConfig"]=a.dojoConfig),l=d(i),f(l,(function(){l.setAttribute("data-esri-loader","loaded"),e(l)}),n),document.body.appendChild(l)}}))}function C(e){return new v.Promise((function(a,t){var i=window["require"].on("error",t);window["require"](e,(function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.remove(),a(e)}))}))}function M(e,a){if(void 0===a&&(a={}),y())return C(e);var t=b(),i=t&&t.getAttribute("src");return!a.url&&i&&(a.url=i),w(a).then((function(){return C(e)}))}var _={getScript:b,isLoaded:y,loadModules:M,loadScript:w,loadCss:u,setDefaultOptions:g,utils:v};e.getScript=b,e.isLoaded=y,e.loadModules=M,e.loadScript=w,e.loadCss=u,e.setDefaultOptions=g,e.utils=v,e["default"]=_,Object.defineProperty(e,"__esModule",{value:!0})}))},affe:function(e,a,t){}}]);
//# sourceMappingURL=chunk-c2c7e750.510abcfc.js.map