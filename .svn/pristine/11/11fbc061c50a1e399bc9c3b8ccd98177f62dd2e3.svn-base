(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3f1de300"],{"406d":function(a,e,i){"use strict";i.r(e);var t=function(){var a=this,e=a.$createElement,i=a._self._c||e;return i("div",{ref:"wrapper",staticClass:"tw-template-wrapper",on:{mousemove:a.handleMouseMove,mouseup:a.handleMouseUp}},[i("div",{ref:"moveMap",staticClass:"map-box"},[i("div",{staticStyle:{height:"100%"},attrs:{id:"arcgisMap"}})]),i("el-dialog",{attrs:{title:"提示",visible:a.dialog.display,width:"600px"},on:{"update:visible":function(e){return a.$set(a.dialog,"display",e)}}},[i("el-form",{attrs:{"label-width":"110px"}},[i("el-form-item",{attrs:{label:"调度内容"}},[i("el-input",{attrs:{type:"textarea",placeholder:"调度内容",autosize:{minRows:10}},model:{value:a.dialog.note,callback:function(e){a.$set(a.dialog,"note",e)},expression:"dialog.note"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){a.dialog.display=!1}}},[a._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:a.addZFDD}},[a._v("确 定")])],1)],1)],1)},o=[],l=(i("7f7f"),i("3835")),s=i("6e58"),n=i("bbd5"),r=i("bc3a"),c=i.n(r),p=i("c1df"),d=i.n(p),m=i("1157"),g=i.n(m),u=(i("c46f"),{name:"StatisticsExport",data:function(){return{map:{arcgisMap:null,dialog:null,levelMap:null},dialog:{display:!1,name:"",note:""},loading:!1,data:[],clickFlag:!1}},mounted:function(){var a=this;this.$nextTick((function(){var e=a;try{Object(s["a"])(["esri/map","esri/basemaps","esri/layers/GraphicsLayer","esri/lang","dijit/TooltipDialog","dijit/popup","esri/dijit/Scalebar","dojo/dom-style"]).then((function(i){var t=Object(l["a"])(i,8),o=t[0],n=t[1],r=t[2],c=t[3],p=t[4],d=t[5],m=t[6],u=t[7];n.mapLayerPath=s["b"],a.map.arcgisMap=new o("arcgisMap",{basemap:"mapLayerPath",spatialReference:{wkid:4326},center:[120.290262812,30.268283139],zoom:4}),a.map.arcgisMap.on("load",(function(){a.getzfgps(),a.map.arcgisMap.infoWindow.resize(100,125),a.map.dialog=new p({style:"position: absolute; width: 350px; font: normal normal normal 10pt Helvetica;z-index:100"}),a.map.dialog.startup(),a.map.levelMap=new r({id:"levelmap"}),a.map.arcgisMap.addLayer(a.map.levelMap),e.map.levelMap.on("click",(function(i){g()(".mapDialog").hide(),d.close(e.map.dialog);var t=i.graphic.attributes,o='<div class="mapDialog" style=""><div class="mapToolPanel"><TitleCircle><HyperCircle></HyperCircle>执法人姓名：'+t.USER_ID+'<HyperCircle></HyperCircle><i class="iconfont icon-close"></i></TitleCircle><div class="conent" style="padding-top: 20px;"><div class="normBox" type="left"><div class="normTitle">定位时间</div><div class="normInfo sbig">'+e.fomarttime(t.GPS_TIME)+'</div></div><div class="normBox" type="left"><div class="normTitle">定位地址</div><div class="normInfo sbig">'+t.GEOGRAPHIC_POSITION+'</div></div></div><span class="bottomRight golsgj" style="cursor: pointer;font-size: 18px;color:aliceblue;">执法调度</span></div></div>',l=c.substitute(i.graphic.attributes,o);e.map.dialog.setContent(l),u.set(e.map.dialog.domNode,"opacity",.85),d.open({popup:e.map.dialog,x:i.pageX,y:i.pageY}),g()(".icon-close").click((function(){g()(".mapDialog").hide(),d.close(e.map.dialog)})),g()(".golsgj").on("click",(function(){g()(".mapDialog").hide(),d.close(e.map.dialog),a.dialog.name=t.USER_ID,a.dialog.note="",e.dialog.display=!0}))}));new m({map:a.map.arcgisMap,scalebarUnit:"dual"})}))}))}catch(i){}}))},methods:{fomarttime:function(a){return d()(a).format("YYYY-MM-DD HH:mm:ss")},getzfgps:function(){var a=this;c.a.get("map/getZFGPS",{baseURL:this.baseURL}).then((function(e){a.data=e.data;for(var i=0;i<e.data.length;i++)a.addmar(e.data[i])}))},addmar:function(a){var e=this;Object(s["a"])(["esri/geometry/Point","esri/graphic","esri/symbols/PictureMarkerSymbol"]).then((function(i){var t=Object(l["a"])(i,3),o=t[0],s=t[1],n=t[2],r=new o({x:parseFloat(a.LONGITUDE)-.0049,y:parseFloat(a.LATITUDE)+.0025,spatialReference:{wkid:4326}}),c="image/marker/persion.png",p=n(e.baseURL+c,38,38).setOffset(14,19);e.map.levelMap.add(new s(r,p,a,""))}))},addZFDD:function(){var a=this;c.a.get("map/addZFDD",{baseURL:this.baseURL,params:{name:this.dialog.name,note:this.dialog.note}}).then((function(e){a.dialog.display=!1,a.$message(e.data.info)}))},handleMouseMove:function(a){if(this.clickFlag){var e=a.clientY-50;if(e>200){if(this.$refs.moveMap.style.height=a.clientY-50+"px",this.$refs.moveTable.style.height="calc(100% - ".concat(e,"px)"),this.activeFlagA){var i=this.$refs["queryBar"].$el;Object(n["d"])(this.$refs["queryPanel"],i)}if(this.activeFlagB){var t=this.$refs["queryBar"].$el;Object(n["d"])(this.$refs["queryPanelB"],t)}}}},handleMouseUp:function(a){this.clickFlag=!1}}}),f=u,v=(i("aa82"),i("2877")),h=Object(v["a"])(f,t,o,!1,null,"768a1218",null);e["default"]=h.exports},"70ce":function(a,e,i){},aa82:function(a,e,i){"use strict";var t=i("70ce"),o=i.n(t);o.a}}]);
//# sourceMappingURL=chunk-3f1de300.502e3294.js.map