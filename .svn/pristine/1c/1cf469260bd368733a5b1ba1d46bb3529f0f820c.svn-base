{"version":3,"sources":["webpack:///./src/views/operationalDynamicMonitor/ViolationOperationAnalysis.vue?9f16","webpack:///src/views/operationalDynamicMonitor/ViolationOperationAnalysis.vue","webpack:///./src/views/operationalDynamicMonitor/ViolationOperationAnalysis.vue?4472","webpack:///./src/views/operationalDynamicMonitor/ViolationOperationAnalysis.vue","webpack:///./src/views/operationalDynamicMonitor/ViolationOperationAnalysis.vue?99b1","webpack:///./src/assets/js/util.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","ref","attrs","query","model","value","callback","$$v","expression","_l","item","key","platformName","handleQuerySearch","on","handleCarfocus","$set","handleQueryClick","_v","exportExcel","directives","name","rawName","table","data","pageSize","currentPage","total","handleTablePageCurrentChange","dialogVisible","$event","dialog","form","changeList","label","slot","exportExcle","staticRenderFns","info","vehicleNumber","driverNumber","violationType","stime","etime","loading","count","radio1","list","display","filedList","mounted","$nextTick","methods","getViolationOperationAnalysis","tempPlatformName","$message","message","type","getPlatformName","length","index","cellStyle","filedLabel","filedValue","substring","error","watch","handler","component","iconClassName","icon","indexOf","formatTemplateHeight","elements","height","Array","offsetHeight","_","each","parseInt","e","console","templateHeight","content","element","cb","style","window","addEventListener","filterTablePage","pageIndex","filter"],"mappings":"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","file":"js/chunk-6622451a.17686af6.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"tw-template-wrapper\"},[_c('el-form',{ref:\"queryBar\",staticClass:\"tw-query-bar\",attrs:{\"model\":_vm.query,\"inline\":true,\"size\":\"small\"}},[_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":\"平台名称\",\"clearable\":\"\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},_vm._l((_vm.info),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.platformName,\"value\":item.platformName}})}),1)],1),_c('el-form-item',[_c('el-autocomplete',{staticClass:\"inline-input\",attrs:{\"fetch-suggestions\":_vm.handleQuerySearch,\"placeholder\":\"车牌号码\",\"trigger-on-focus\":false,\"clearable\":\"\"},on:{\"focus\":_vm.handleCarfocus},model:{value:(_vm.query.vehicleNumber),callback:function ($$v) {_vm.$set(_vm.query, \"vehicleNumber\", $$v)},expression:\"query.vehicleNumber\"}})],1),_c('el-form-item',[_c('el-input',{attrs:{\"placeholder\":\"驾驶员证号\",\"clearable\":\"\"},model:{value:(_vm.query.driverNumber),callback:function ($$v) {_vm.$set(_vm.query, \"driverNumber\", $$v)},expression:\"query.driverNumber\"}})],1),_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"开始时间\"},model:{value:(_vm.query.stime),callback:function ($$v) {_vm.$set(_vm.query, \"stime\", $$v)},expression:\"query.stime\"}})],1),_c('el-form-item',[_c('el-date-picker',{attrs:{\"type\":\"date\",\"placeholder\":\"结束时间\"},model:{value:(_vm.query.etime),callback:function ($$v) {_vm.$set(_vm.query, \"etime\", $$v)},expression:\"query.etime\"}})],1),_c('el-form-item',[_c('el-select',{attrs:{\"placeholder\":\"违规类型\"},model:{value:(_vm.query.violationType),callback:function ($$v) {_vm.$set(_vm.query, \"violationType\", $$v)},expression:\"query.violationType\"}},[_c('el-option',{attrs:{\"label\":\"人证不符\",\"value\":\"人证不符\"}}),_c('el-option',{attrs:{\"label\":\"车证不符\",\"value\":\"车证不符\"}}),_c('el-option',{attrs:{\"label\":\"人车证不符\",\"value\":\"人车证不符\"}})],1)],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleQueryClick}},[_vm._v(\"查询\")])],1),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportExcel}},[_vm._v(\"导出\")])],1)],1),_c('div',{ref:\"queryPanel\",staticClass:\"tw-query-panel\"},[_c('el-table',{directives:[{name:\"loading\",rawName:\"v-loading\",value:(_vm.table.loading),expression:\"table.loading\"}],staticClass:\"tw-table\",attrs:{\"data\":_vm.table.data,\"border\":\"\",\"height\":\"calc(100% - 42px)\"}},[_c('el-table-column',{attrs:{\"align\":\"center\",\"type\":\"index\",\"label\":\"序号\",\"width\":\"60\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"DRIVER_NAME\",\"label\":\"姓名\",\"width\":\"80\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"DRIVER_NUMBER\",\"label\":\"驾驶员证号\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"VEHICLE_NUMBER\",\"label\":\"车牌号码\",\"width\":\"140\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ABB_NAME\",\"label\":\"平台名称\",\"width\":\"180\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ORDER_NUMBER\",\"label\":\"订单编号\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"VIOLATION_TYPE\",\"label\":\"违规类型\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"START_TIME\",\"label\":\"订单起始时间\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"END_TIME\",\"label\":\"订单终止时间\",\"width\":\"160\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"START_POSITION\",\"label\":\"订单起点\",\"width\":\"140\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"END_POSITION\",\"label\":\"订单终点\",\"width\":\"140\"}}),_c('el-table-column',{attrs:{\"align\":\"center\",\"prop\":\"ORDER_MONEY\",\"label\":\"订单金额/元\",\"width\":\"140\"}})],1),_c('el-pagination',{attrs:{\"background\":\"\",\"page-size\":_vm.table.pageSize,\"current-page\":_vm.table.currentPage,\"total\":_vm.table.total},on:{\"current-change\":_vm.handleTablePageCurrentChange}})],1),_c('el-dialog',{attrs:{\"title\":\"导出\",\"visible\":_vm.dialogVisible,\"width\":\"30%\"},on:{\"update:visible\":function($event){_vm.dialogVisible=$event}}},[_c('el-form',{attrs:{\"model\":_vm.dialog.form,\"label-width\":\"80px\"}},[_c('el-form-item',{attrs:{\"label\":\"导出类型\"}},[_c('el-radio',{attrs:{\"label\":\"1\",\"border\":\"\"},on:{\"change\":_vm.changeList},model:{value:(_vm.dialog.radio1),callback:function ($$v) {_vm.$set(_vm.dialog, \"radio1\", $$v)},expression:\"dialog.radio1\"}},[_vm._v(\"默认\")]),_c('el-radio',{attrs:{\"label\":\"2\",\"border\":\"\"},on:{\"change\":_vm.changeList},model:{value:(_vm.dialog.radio1),callback:function ($$v) {_vm.$set(_vm.dialog, \"radio1\", $$v)},expression:\"dialog.radio1\"}},[_vm._v(\"自定义\")])],1),_c('el-form-item',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.dialog.display),expression:\"dialog.display\"}],attrs:{\"label\":\"导出列表\"}},[_c('el-select',{attrs:{\"multiple\":\"\",\"placeholder\":\"请选择\",\"clearable\":true},model:{value:(_vm.dialog.list),callback:function ($$v) {_vm.$set(_vm.dialog, \"list\", $$v)},expression:\"dialog.list\"}},_vm._l((_vm.filedList),function(item){return _c('el-option',{key:item.value,attrs:{\"label\":item.label,\"value\":item.value}})}),1)],1)],1),_c('span',{staticClass:\"dialog-footer\",attrs:{\"slot\":\"footer\"},slot:\"footer\"},[_c('el-button',{on:{\"click\":function($event){_vm.dialogVisible = false}}},[_vm._v(\"取 消\")]),_c('el-button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.exportExcle}},[_vm._v(\"导 出\")])],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<!--违规营运分析-->\r\n<template>\r\n  <div class=\"tw-template-wrapper\">\r\n    <el-form class=\"tw-query-bar\" :model=\"query\" :inline=\"true\" size=\"small\" ref=\"queryBar\">\r\n      <el-form-item>\r\n        <el-select v-model=\"value\" placeholder=\"平台名称\" clearable>\r\n          <el-option\r\n            v-for=\"item in info\"\r\n            :key=\"item.value\"\r\n            :label=\"item.platformName\"\r\n            :value=\"item.platformName\"\r\n          ></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-autocomplete\r\n          class=\"inline-input\"\r\n          v-model=\"query.vehicleNumber\"\r\n          :fetch-suggestions=\"handleQuerySearch\"\r\n          placeholder=\"车牌号码\"\r\n          :trigger-on-focus=\"false\"\r\n          @focus=\"handleCarfocus\"\r\n          clearable\r\n        ></el-autocomplete>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-input v-model=\"query.driverNumber\" placeholder=\"驾驶员证号\" clearable></el-input>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-date-picker v-model=\"query.stime\" type=\"date\" placeholder=\"开始时间\"></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-date-picker v-model=\"query.etime\" type=\"date\" placeholder=\"结束时间\"></el-date-picker>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-select v-model=\"query.violationType\" placeholder=\"违规类型\">\r\n          <el-option label=\"人证不符\" value=\"人证不符\"></el-option>\r\n          <el-option label=\"车证不符\" value=\"车证不符\"></el-option>\r\n          <el-option label=\"人车证不符\" value=\"人车证不符\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"handleQueryClick\">查询</el-button>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" @click=\"exportExcel\">导出</el-button>\r\n      </el-form-item>\r\n    </el-form>\r\n    <div class=\"tw-query-panel\" ref=\"queryPanel\">\r\n      <el-table class=\"tw-table\" :data=\"table.data\" v-loading=\"table.loading\" border height=\"calc(100% - 42px)\">\r\n        <el-table-column align=\"center\" type=\"index\" label=\"序号\" width=\"60\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"DRIVER_NAME\" label=\"姓名\" width=\"80\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"DRIVER_NUMBER\" label=\"驾驶员证号\" width=\"180\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"VEHICLE_NUMBER\" label=\"车牌号码\" width=\"140\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"ABB_NAME\" label=\"平台名称\" width=\"180\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"ORDER_NUMBER\" label=\"订单编号\" width=\"160\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"VIOLATION_TYPE\" label=\"违规类型\" width=\"160\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"START_TIME\" label=\"订单起始时间\" width=\"160\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"END_TIME\" label=\"订单终止时间\" width=\"160\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"START_POSITION\" label=\"订单起点\" width=\"140\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"END_POSITION\" label=\"订单终点\" width=\"140\"></el-table-column>\r\n        <el-table-column align=\"center\" prop=\"ORDER_MONEY\" label=\"订单金额/元\" width=\"140\"></el-table-column>\r\n      </el-table>\r\n      <el-pagination\r\n        background\r\n        :page-size=\"table.pageSize\"\r\n        :current-page=\"table.currentPage\"\r\n        :total=\"table.total\"\r\n        @current-change=\"handleTablePageCurrentChange\"\r\n      ></el-pagination>\r\n    </div>\r\n    <el-dialog\r\n        title=\"导出\"\r\n        :visible.sync=\"dialogVisible\"\r\n        width=\"30%\">\r\n      <el-form :model=\"dialog.form\" label-width=\"80px\">\r\n        <el-form-item label=\"导出类型\">\r\n          <el-radio v-model=\"dialog.radio1\" label=\"1\" border @change=\"changeList\">默认</el-radio>\r\n          <el-radio v-model=\"dialog.radio1\" label=\"2\" border @change=\"changeList\">自定义</el-radio>\r\n        </el-form-item>\r\n        <el-form-item label=\"导出列表\" v-show=\"dialog.display\">\r\n          <el-select v-model=\"dialog.list\" multiple placeholder=\"请选择\" :clearable=\"true\">\r\n            <el-option\r\n                v-for=\"item in filedList\"\r\n                :key=\"item.value\"\r\n                :label=\"item.label\"\r\n                :value=\"item.value\">\r\n            </el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n      </el-form>\r\n      <span slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"exportExcle\">导 出</el-button>\r\n      </span>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios'\r\nimport moment from 'moment'\r\nimport _ from 'underscore'\r\nimport { templateHeight } from '../../assets/js/util'\r\n\r\nexport default {\r\n  name: 'ViolationOperationAnalysis',\r\n  data() {\r\n    return {\r\n      info: [\r\n        {\r\n          platformName: '全部选择',\r\n          vehicleNumber: '',\r\n          driverNumber: '',\r\n          violationType: '',\r\n          stime: '',\r\n          etime: '',\r\n          value: '全部选择'\r\n        }\r\n      ],\r\n      query: {\r\n        platformName: '',\r\n        vehicleNumber: '',\r\n        driverNumber: '',\r\n        violationType: '',\r\n        stime: '',\r\n        etime: '',\r\n        value: ''\r\n      },\r\n      table: {\r\n        loading: false,\r\n        data: [],\r\n        pageSize: 20,\r\n        currentPage: 1,\r\n        total: 0\r\n      },\r\n      count: 1,\r\n      value: '全部选择',\r\n      dialogVisible: false,\r\n      dialog: {\r\n        radio1: '1',\r\n        list: [],\r\n        display: false\r\n      },\r\n      filedList: [{\r\n        value: 'DRIVER_NAME',\r\n        label: '驾驶员姓名'\r\n      }, {\r\n        value: 'DRIVER_NUMBER',\r\n        label: '驾驶员证号'\r\n      }, {\r\n        value: 'VEHICLE_NUMBER',\r\n        label: '车牌号码'\r\n      }, {\r\n        value: 'ABB_NAME',\r\n        label: '平台公司'\r\n      }, {\r\n        value: 'ORDER_NUMBER',\r\n        label: '订单编号'\r\n      }, {\r\n        value: 'VIOLATION_TYPE',\r\n        label: '违规类型'\r\n      }, {\r\n        value: 'STIME',\r\n        label: '订单开始时间'\r\n      }, {\r\n        value: 'ETIME',\r\n        label: '订单结束时间'\r\n      }, {\r\n        value: 'START_POSITION',\r\n        label: '订单起点'\r\n      }, {\r\n        value: 'END_POSITION',\r\n        label: '订单终点'\r\n      }, {\r\n        value: 'ORDER_MONEY',\r\n        label: '订单金额'\r\n      }]\r\n    }\r\n  },\r\n  mounted() {\r\n    this.$nextTick(() => {\r\n      const elements = this.$refs['queryBar'].$el\r\n      templateHeight(this.$refs['queryPanel'], elements)\r\n      this.query.stime = moment()\r\n        .subtract(1, 'days')\r\n        .format('YYYY-MM-DD')\r\n      this.query.etime = moment()\r\n        .subtract(1, 'days')\r\n        .format('YYYY-MM-DD')\r\n      this.getViolationOperationAnalysis()\r\n      this.getPlatformName()\r\n    })\r\n  },\r\n  methods: {\r\n    getViolationOperationAnalysis() {\r\n      const { vehicleNumber, driverNumber, violationType, stime, etime } = this.query\r\n      if (stime === '' || !stime || etime === '' || !etime) {\r\n        this.$message({\r\n          message: '时间不能为空！',\r\n          type: 'warning'\r\n        })\r\n      } else {\r\n        this.table.loading = true\r\n\r\n        let tempPlatformName = ''\r\n        if (this.value != '全部选择') {\r\n          tempPlatformName = this.value\r\n        }\r\n        const { currentPage, pageSize } = this.table\r\n        axios\r\n          .get('getOperationAndWarningAction/getViolationOperationAnalysis', {\r\n            baseURL: this.baseURL,\r\n            params: {\r\n              platformName: tempPlatformName,\r\n              vehicleNumber: vehicleNumber,\r\n              driverNumber: driverNumber,\r\n              violationType: violationType,\r\n              page: currentPage,\r\n              pageSize: pageSize,\r\n              sTime: stime && moment(stime).format('YYYY-MM-DD'),\r\n              eTime: etime && moment(etime).format('YYYY-MM-DD')\r\n            }\r\n          })\r\n          .then(res => {\r\n            this.table.data = res.data.datas || []\r\n            this.table.total = res.data.count\r\n            this.table.loading = false\r\n          })\r\n      }\r\n    },\r\n    getPlatformName() {\r\n      this.table.loading = true\r\n      axios\r\n        .get('getOperationAndWarningAction/getPlatformName', {\r\n          baseURL: this.baseURL,\r\n          params: {}\r\n        })\r\n        .then(res => {\r\n          _.each(res.data, item => {\r\n            let temp = {}\r\n            if (item.ABB_NAME != '') {\r\n              temp.platformName = item.ABB_NAME\r\n              temp.value = this.count++\r\n              this.info.push(temp)\r\n            }\r\n          })\r\n          this.table.loading = false\r\n        })\r\n    },\r\n    handleQuerySearch(query, cb) {\r\n      let list = []\r\n      if (query.length >= 5) {\r\n        let idata = `postData={'vehicle_number':'${this.query.vehicleNumber}','time':'${this.query.stime}'}`\r\n        axios\r\n          .post('getOperationAndWarningAction/getViolationOperationAnalysisVehicleNumber', idata, {\r\n            baseURL: this.baseURL\r\n          })\r\n          .then(res => {\r\n            for (let i = 0; i < res.data.length; i++) {\r\n              list.push({\r\n                value: res.data[i].VEHICLE_NUMBER\r\n              })\r\n            }\r\n            cb(list)\r\n          })\r\n      } else {\r\n        return\r\n      }\r\n    },\r\n    handleCarfocus() {\r\n      // const {vehino} = this.query;\r\n      if (this.query.vehicleNumber === '') this.query.vehicleNumber = '浙A'\r\n    },\r\n    handleQueryClick() {\r\n      this.table.currentPage = 1\r\n      this.getViolationOperationAnalysis()\r\n    },\r\n    handleTablePageCurrentChange(index) {\r\n      this.table.currentPage = index\r\n      this.getViolationOperationAnalysis()\r\n    },\r\n    cellStyle() {\r\n      return 'text-align:center;'\r\n    },\r\n    exportExcel() {\r\n      this.dialogVisible = true\r\n      this.dialog.radio1 = '1'\r\n      this.dialog.list = []\r\n      this.dialog.display = false\r\n    },\r\n    changeList() {\r\n      if(this.dialog.radio1 == '1') this.dialog.display = false\r\n      else this.dialog.display = true\r\n    },\r\n    exportExcle() {\r\n      const {list,radio1} = this.dialog\r\n      let chioceList = _.filter(this.filedList,item => list.indexOf(item.value)!=-1)\r\n      if(radio1 == '2') {\r\n        if(chioceList.length == 0) {\r\n          this.$message.error(\"导出列表不能为空！\")\r\n          return\r\n        }\r\n      }\r\n      let filedLabel = '',filedValue = ''\r\n      _.map(chioceList, item => {\r\n        filedLabel += item.label + ','\r\n        filedValue += item.value + ','\r\n      })\r\n      filedValue = filedValue.substring(0, filedValue.length - 1)\r\n      filedLabel = filedLabel.substring(0, filedLabel.length - 1)\r\n      this.dialogVisible = false\r\n      const { platformName, vehicleNumber, driverNumber, violationType, stime, etime } = this.query\r\n          window.open(\r\n            `${this.baseURL}getOperationAndWarningAction/getViolationOperationAnalysisExcel?platformName=${\r\n              this.value\r\n            }&vehicleNumber=${vehicleNumber}&driverNumber=${driverNumber}&violationType=${violationType}&sTime=${stime &&\r\n              moment(stime).format('YYYY-MM-DD')}&eTime=${etime && moment(etime).format('YYYY-MM-DD')}\r\n              &type=${radio1}&filedLabel=${filedLabel}&filedValue=${filedValue}`\r\n          )\r\n    }\r\n  },\r\n  watch: {\r\n    '$route.path': {\r\n      handler(oldVal, newVal) {\r\n        this.query.stime = moment()\r\n          .subtract(1, 'days')\r\n          .format('YYYY-MM-DD')\r\n        this.query.etime = moment()\r\n          .subtract(1, 'days')\r\n          .format('YYYY-MM-DD')\r\n        this.getViolationOperationAnalysis()\r\n      }\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n@import '../../assets/css/variable.scss';\r\n.tw-table {\r\n  bottom: $margin;\r\n}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViolationOperationAnalysis.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViolationOperationAnalysis.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ViolationOperationAnalysis.vue?vue&type=template&id=a55d4dd8&scoped=true&\"\nimport script from \"./ViolationOperationAnalysis.vue?vue&type=script&lang=js&\"\nexport * from \"./ViolationOperationAnalysis.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ViolationOperationAnalysis.vue?vue&type=style&index=0&id=a55d4dd8&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"a55d4dd8\",\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViolationOperationAnalysis.vue?vue&type=style&index=0&id=a55d4dd8&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ViolationOperationAnalysis.vue?vue&type=style&index=0&id=a55d4dd8&lang=scss&scoped=true&\"","/*\r\n * @Descripttion:\r\n * @version:\r\n * @Author: CFQ\r\n * @Date: 2019-12-09 11:58:35\r\n * @LastEditors: CFQ\r\n * @LastEditTime: 2020-05-28 18:53:48\r\n */\r\n\r\nimport { Loading } from 'element-ui'\r\nimport _ from 'underscore'\r\n\r\nexport function iconClassName(icon) {\r\n  if (icon.indexOf('icon-') === 0) return `iconfont ${icon}`\r\n  else if (icon.indexOf('el-icon-') === 0) return icon\r\n  else return ''\r\n}\r\nexport function formatTemplateHeight(elements) {\r\n  let height = 0\r\n  if (!(elements instanceof Array) && !elements.offsetHeight) return ''\r\n  if (elements instanceof Array)\r\n    _.each(elements, item => {\r\n      try {\r\n        height += parseInt(item.offsetHeight)\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    })\r\n  else height = parseInt(elements.offsetHeight)\r\n  return `calc(100% - ${height}px)`\r\n}\r\nexport function templateHeight(content, element, cb) {\r\n  if (cb) cb()\r\n  content.style.height = formatTemplateHeight(element)\r\n  window.addEventListener('resize', () => {\r\n    content.style.height = formatTemplateHeight(element)\r\n    if (cb) cb()\r\n  })\r\n}\r\n\r\n/**\r\n * 前端分页\r\n * @param data\r\n * @param pageSize\r\n * @param currentPage\r\n * @returns {Array}\r\n */\r\nexport function filterTablePage({ data, pageSize, currentPage }) {\r\n  const pageIndex = currentPage - 1\r\n  return _.filter(data, (item, index) => {\r\n    return index >= pageIndex * pageSize && index < currentPage * pageSize\r\n  })\r\n}\r\n\r\nexport function changeHeight(elements) {\r\n  let height = 0\r\n  if (!(elements instanceof Array) && !elements.offsetHeight) return ''\r\n  if (elements instanceof Array)\r\n    _.each(elements, item => {\r\n      try {\r\n        height += parseInt(item.offsetHeight)\r\n      } catch (e) {\r\n        console.error(e)\r\n      }\r\n    })\r\n  else height = elements.offsetHeight\r\n  return `calc(100% - ${height}px)`\r\n}\r\nexport function templateBodyHeight(center, elements) {\r\n  window.onresize = () => {\r\n    center.style.height = changeHeight(elements)\r\n  }\r\n  center.style.height = changeHeight(elements)\r\n}\r\n\r\nexport function listUnique(array) {\r\n  let temp = [] //一个新的临时数组\r\n  for (let i = 0; i < array.length; i++) {\r\n    if (temp.indexOf(array[i]) == -1) {\r\n      temp.push(array[i])\r\n    }\r\n  }\r\n  return temp\r\n}\r\n\r\nexport function loading() {\r\n  return Loading.service({\r\n    lock: true,\r\n    text: '加载中',\r\n    target: document.getElementById('right') // 设置加载动画区域\r\n  })\r\n}\r\n"],"sourceRoot":""}