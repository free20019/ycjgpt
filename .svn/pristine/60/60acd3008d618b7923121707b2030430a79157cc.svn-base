(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eaa18f8a"],{"10bf":function(t,e,i){"use strict";var o=i("f266"),n=i.n(o);n.a},"350c":function(t,e,i){"use strict";var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("div",{ref:"editor"})])},n=[],a={name:"WngEditor",data:function(){return{editor:null}},model:{prop:"editorContent",event:"change"},props:{editorContent:{required:!0},sonContent:String},mounted:function(){var t=this,e=new E(this.$refs.editor);e.customConfig.menus=["head","bold","fontSize","fontName","italic","underline","strikeThrough","foreColor","backColor","link","list","justify","quote","table","undo","redo"],e.customConfig.onchange=function(e){t.$emit("change",e)},e.create(),e.txt.html(this.editorContent),this.editor=e,this.sonContent&&this.editor.cmd.do("insertHTML",this.sonContent)},methods:{addText:function(t){t?(this.editor.txt.clear(),this.editor.txt.html(t)):"null"==t&&this.editor.txt.html("")},clearTexr:function(){console.info("cmd,",this.editor.cmd),this.editor.txt.clear()}}},s=a,l=i("2877"),r=Object(l["a"])(s,o,n,!1,null,"2b0a5722",null);e["a"]=r.exports},c925:function(t,e,i){"use strict";i.r(e);var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"template-wrapper"},[i("div",{staticClass:"tw-my-layout"},[i("div",{staticClass:"tw-my-layout-left"},[i("div",{staticClass:"dataListPanel center"},[i("div",{staticClass:"header"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.showDialog("添加")}}},[t._v("+")])],1),i("div",{staticClass:"content"},[i("div",{staticClass:"scrollbar-macosx"},t._l(t.emergencyPlanList,(function(e){return i("div",{staticClass:"base-item text-clear",on:{click:function(i){return t.showContent(e)}}},[i("div",{staticClass:"item-title",domProps:{textContent:t._s(e.NAME)}}),i("div",{staticClass:"item-tool"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(i){return t.showBack(e)}}},[t._v("编辑")])],1)])})),0)])])]),i("div",{staticClass:"tw-my-layout-main"},[i("div",{staticClass:"dataListPanel center",staticStyle:{padding:"0"}},[i("div",{staticClass:"header",domProps:{textContent:t._s(t.showInfo.title)}}),i("div",{staticClass:"content"},[i("div",{staticClass:"scrollbar-macosx"},[i("div",{staticStyle:{height:"100%","overflow-y":"auto"},attrs:{id:"content"},domProps:{innerHTML:t._s(t.showInfo.content)}})])])])])]),i("el-dialog",{attrs:{title:t.dialog.title,visible:t.dialogVisible,width:"600px","close-on-click-modal":!1,"before-close":t.handleClose},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{staticClass:"hz-form"},[i("el-form-item",{attrs:{label:"预案标题"}},[i("el-input",{attrs:{placeholder:"预案标题"},model:{value:t.dialog.form.title,callback:function(e){t.$set(t.dialog.form,"title",e)},expression:"dialog.form.title"}})],1),i("el-form-item",{attrs:{label:"预案内容"}},[i("wangeditor",{ref:"wangEditor",staticClass:"tw-editor",attrs:{sonContent:t.sonContent},model:{value:t.editor,callback:function(e){t.editor=e},expression:"editor"}})],1)],1),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.submitInfo}},[t._v("确 定")])],1)],1)],1)},n=[],a=i("bc3a"),s=i.n(a),l=i("350c"),r={name:"flfg",data:function(){return{emergencyPlanList:[],dialogVisible:!1,sonContent:"",dialog:{title:"",form:{title:"",nowId:0}},editorType:!1,editor:null,showInfo:{title:"暂无内容",content:""}}},components:{wangeditor:l["a"]},mounted:function(){var t=this;this.$nextTick((function(){t.getAllNames()}))},methods:{showContent:function(t){this.showInfo.title=t.NAME,this.getContent(t.ID)},getAllNames:function(){var t=this,e=this.baseURL;s.a.get("Yjzh/getAllNames",{baseURL:e,params:{table:"TB_YJZH_FLFG"}}).then((function(e){t.emergencyPlanList=e.data}))},showDialog:function(t){this.dialogVisible=!0,this.editorType=!0,"编辑"==t&&(this.dialog.title=t),"添加"==t&&(this.dialog.title=t)},showBack:function(t){this.showDialog("编辑"),this.dialog.form.title=t.NAME,this.getContent(t.ID)},getContent:function(t){var e=this;this.dialog.form.nowId=t;var i=this.baseURL;s.a.get("Yjzh/getContent",{baseURL:i,params:{table:"TB_YJZH_FLFG",id:t}}).then((function(t){e.showInfo.content=t.data[0].CONTENT,e.sonContent=t.data[0].CONTENT,e.editorType&&e.$refs.wangEditor.addText(t.data[0].CONTENT)}))},submitInfo:function(){var t=this,e=this.baseURL;if("编辑"==this.dialog.title){var i=new URLSearchParams;i.append("table","TB_YJZH_FLFG"),i.append("id",this.dialog.form.nowId),i.append("name",this.dialog.form.title),i.append("content",this.editor),s.a.post("Yjzh/editContent",i,{baseURL:e}).then((function(e){t.dialogVisible=!1}))}if("添加"==this.dialog.title){var o=new URLSearchParams;o.append("table","TB_YJZH_FLFG"),o.append("name",this.dialog.form.title),o.append("content",this.editor),s.a.get("Yjzh/saveContent",{baseURL:e,params:{table:"TB_YJZH_FLFG",name:this.dialog.form.title,content:this.editor}}).then((function(e){t.dialogVisible=!1}))}},handleClose:function(){this.dialogVisible=!1,this.$refs.wangEditor.clearTexr(),this.editor=null,this.dialog.form.title=""}}},d=r,c=(i("10bf"),i("2877")),h=Object(c["a"])(d,o,n,!1,null,"d3c95d28",null);e["default"]=h.exports},f266:function(t,e,i){}}]);
//# sourceMappingURL=chunk-eaa18f8a.6f08f359.js.map