(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-37eba750"],{"02f4":function(e,a,t){var n=t("4588"),i=t("be13");e.exports=function(e){return function(a,t){var r,o,l=String(i(a)),s=n(t),c=l.length;return s<0||s>=c?e?"":void 0:(r=l.charCodeAt(s),r<55296||r>56319||s+1===c||(o=l.charCodeAt(s+1))<56320||o>57343?e?l.charAt(s):r:e?l.slice(s,s+2):o-56320+(r-55296<<10)+65536)}}},"0390":function(e,a,t){"use strict";var n=t("02f4")(!0);e.exports=function(e,a,t){return a+(t?n(e,a).length:1)}},"0bfb":function(e,a,t){"use strict";var n=t("cb7c");e.exports=function(){var e=n(this),a="";return e.global&&(a+="g"),e.ignoreCase&&(a+="i"),e.multiline&&(a+="m"),e.unicode&&(a+="u"),e.sticky&&(a+="y"),a}},"214f":function(e,a,t){"use strict";t("b0c5");var n=t("2aba"),i=t("32e9"),r=t("79e5"),o=t("be13"),l=t("2b4c"),s=t("520a"),c=l("species"),p=!r((function(){var e=/./;return e.exec=function(){var e=[];return e.groups={a:"7"},e},"7"!=="".replace(e,"$<a>")})),m=function(){var e=/(?:)/,a=e.exec;e.exec=function(){return a.apply(this,arguments)};var t="ab".split(e);return 2===t.length&&"a"===t[0]&&"b"===t[1]}();e.exports=function(e,a,t){var d=l(e),u=!r((function(){var a={};return a[d]=function(){return 7},7!=""[e](a)})),g=u?!r((function(){var a=!1,t=/a/;return t.exec=function(){return a=!0,null},"split"===e&&(t.constructor={},t.constructor[c]=function(){return t}),t[d](""),!a})):void 0;if(!u||!g||"replace"===e&&!p||"split"===e&&!m){var f=/./[d],h=t(o,d,""[e],(function(e,a,t,n,i){return a.exec===s?u&&!i?{done:!0,value:f.call(a,t,n)}:{done:!0,value:e.call(t,a,n)}:{done:!1}})),v=h[0],b=h[1];n(String.prototype,e,v),i(RegExp.prototype,d,2==a?function(e,a){return b.call(e,this,a)}:function(e){return b.call(e,this)})}}},"28a5":function(e,a,t){"use strict";var n=t("aae3"),i=t("cb7c"),r=t("ebd6"),o=t("0390"),l=t("9def"),s=t("5f1b"),c=t("520a"),p=t("79e5"),m=Math.min,d=[].push,u="split",g="length",f="lastIndex",h=4294967295,v=!p((function(){RegExp(h,"y")}));t("214f")("split",2,(function(e,a,t,p){var b;return b="c"=="abbc"[u](/(b)*/)[1]||4!="test"[u](/(?:)/,-1)[g]||2!="ab"[u](/(?:ab)*/)[g]||4!="."[u](/(.?)(.?)/)[g]||"."[u](/()()/)[g]>1||""[u](/.?/)[g]?function(e,a){var i=String(this);if(void 0===e&&0===a)return[];if(!n(e))return t.call(i,e,a);var r,o,l,s=[],p=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,u=void 0===a?h:a>>>0,v=new RegExp(e.source,p+"g");while(r=c.call(v,i)){if(o=v[f],o>m&&(s.push(i.slice(m,r.index)),r[g]>1&&r.index<i[g]&&d.apply(s,r.slice(1)),l=r[0][g],m=o,s[g]>=u))break;v[f]===r.index&&v[f]++}return m===i[g]?!l&&v.test("")||s.push(""):s.push(i.slice(m)),s[g]>u?s.slice(0,u):s}:"0"[u](void 0,0)[g]?function(e,a){return void 0===e&&0===a?[]:t.call(this,e,a)}:t,[function(t,n){var i=e(this),r=void 0==t?void 0:t[a];return void 0!==r?r.call(t,i,n):b.call(String(i),t,n)},function(e,a){var n=p(b,e,this,a,b!==t);if(n.done)return n.value;var c=i(e),d=String(this),u=r(c,RegExp),g=c.unicode,f=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(v?"y":"g"),y=new u(v?c:"^(?:"+c.source+")",f),x=void 0===a?h:a>>>0;if(0===x)return[];if(0===d.length)return null===s(y,d)?[d]:[];var w=0,_=0,A=[];while(_<d.length){y.lastIndex=v?_:0;var E,k=s(y,v?d:d.slice(_));if(null===k||(E=m(l(y.lastIndex+(v?0:_)),d.length))===w)_=o(d,_,g);else{if(A.push(d.slice(w,_)),A.length===x)return A;for(var L=1;L<=k.length-1;L++)if(A.push(k[L]),A.length===x)return A;_=w=E}}return A.push(d.slice(w)),A}]}))},"520a":function(e,a,t){"use strict";var n=t("0bfb"),i=RegExp.prototype.exec,r=String.prototype.replace,o=i,l="lastIndex",s=function(){var e=/a/,a=/b*/g;return i.call(e,"a"),i.call(a,"a"),0!==e[l]||0!==a[l]}(),c=void 0!==/()??/.exec("")[1],p=s||c;p&&(o=function(e){var a,t,o,p,m=this;return c&&(t=new RegExp("^"+m.source+"$(?!\\s)",n.call(m))),s&&(a=m[l]),o=i.call(m,e),s&&o&&(m[l]=m.global?o.index+o[0].length:a),c&&o&&o.length>1&&r.call(o[0],t,(function(){for(p=1;p<arguments.length-2;p++)void 0===arguments[p]&&(o[p]=void 0)})),o}),e.exports=o},"5f1b":function(e,a,t){"use strict";var n=t("23c6"),i=RegExp.prototype.exec;e.exports=function(e,a){var t=e.exec;if("function"===typeof t){var r=t.call(e,a);if("object"!==typeof r)throw new TypeError("RegExp exec method returned something other than an Object or null");return r}if("RegExp"!==n(e))throw new TypeError("RegExp#exec called on incompatible receiver");return i.call(e,a)}},6105:function(e,a,t){},"63e1":function(e,a,t){"use strict";var n=t("6105"),i=t.n(n);i.a},"6f57":function(e,a,t){"use strict";t.r(a);var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"tw-template-wrapper"},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.mapQueryPanel,expression:"mapQueryPanel"}],staticClass:"tw-map-left-panel"},[t("el-tabs",{staticClass:"tw-template-height",attrs:{type:"card",stretch:!0},on:{"tab-click":e.tabClick},model:{value:e.activeName,callback:function(a){e.activeName=a},expression:"activeName"}},[t("el-tab-pane",{attrs:{label:"区域监测",name:"first"}},[t("div",{staticClass:"tab-info"},[t("el-table",{attrs:{data:e.areaList,"row-class-name":e.tableRowClassName},on:{"row-click":e.getVehicleList}},[t("el-table-column",{attrs:{"show-overflow-tooltip":!0,prop:"AREA_NAME",width:"100",label:"区域"}}),t("el-table-column",{attrs:{align:"center",prop:"AREA_NUM",label:"车辆数"}}),t("el-table-column",{attrs:{align:"center",prop:"AREA_AVG_NUM",label:"预报警数"}})],1)],1)]),t("el-tab-pane",{attrs:{label:"电子围栏",name:"second"}},[t("div",{staticClass:"tab-info"},[t("ul",e._l(e.fanceList,(function(a){return t("li",{key:a.id,staticClass:"tw-list-item",class:{"tw-text-error":a.type},staticStyle:{"line-height":"49px","padding-left":"60px",color:"#374873","font-weight":"600"},on:{click:function(t){return e.handleAreaFanceChange(a)}}},[t("i",{staticClass:"tw-icon--prefix el-icon-location-outline"}),e._v("\n                "+e._s(a.AREA_NAME)+"\n              ")])})),0)])])],1)],1),t("div",{staticClass:"map-box",attrs:{id:"arcgisMap"}}),t("div",{staticClass:"table-box"},[t("div",{staticClass:"table-title"},[e._v(e._s(e.areaname))]),t("el-table",{directives:[{name:"show",rawName:"v-show",value:0==e.tabIndex,expression:"tabIndex == 0"},{name:"loading",rawName:"v-loading",value:e.areaLonding,expression:"areaLonding"}],attrs:{data:e.vehicleList,border:"",height:"100%",size:"mini"}},[t("el-table-column",{attrs:{label:"平台名称",prop:"vehName"}}),t("el-table-column",{attrs:{label:"车牌号码",prop:"vehino"}}),t("el-table-column",{attrs:{label:"营运状态",prop:"bizStatus",formatter:e.fomartyytype}}),t("el-table-column",{attrs:{label:"速度(KM/H)",prop:"speed"}}),t("el-table-column",{attrs:{label:"定位时间",prop:"dateTime"}})],1),t("el-table",{directives:[{name:"show",rawName:"v-show",value:1==e.tabIndex,expression:"tabIndex == 1"},{name:"loading",rawName:"v-loading",value:e.fanceLonding,expression:"fanceLonding"}],attrs:{data:e.filterDataList,border:"",height:"calc(100% - 42px)",size:"mini"}},[t("el-table-column",{attrs:{prop:"ABB_NAME",label:"平台名称",width:"160"}}),t("el-table-column",{attrs:{prop:"VEHICLENO",label:"车牌号码",width:"160"}}),t("el-table-column",{attrs:{prop:"IN_OUT",label:"类型",formatter:e.fomarttype,width:"160"}}),t("el-table-column",{attrs:{prop:"POSITIONTIME",label:"定位时间","min-width":"160","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",{domProps:{textContent:e._s(e.fomarttime(a.row.POSITIONTIME))}})]}}])})],1),t("el-pagination",{attrs:{background:"",layout:"prev, pager, next, total",total:e.total,"page-count":e.totalPages,"current-page":e.currentPage},on:{"current-change":e.handlePageSizeChange}})],1)])},i=[],r=(t("28a5"),t("3835")),o=t("bc3a"),l=t.n(o),s=t("c46f"),c=t("c1df"),p=t.n(c),m=t("6e58"),d=t("bbd5"),u=t("1157"),g=t.n(u),f={name:"SpecificAreaMonitor",data:function(){return{map:{arcgisMap:null,levelMap:null,dialog:null,marMap:null},loading:!1,mapQueryPanel:!1,fanceQueryPanel:!1,activeAreaNames:0,areaList:[],vehicleList:[],activeName:"first",fanceList:[],fanceData:[],table:{data:[]},tabIndex:0,currentPage:1,tableRows:10,total:0,totalPages:1,fanceLonding:!1,areaLonding:!1,areaname:"区域名称",tabactiveName:"first"}},mounted:function(){var e=this;this.$nextTick((function(){var a=e;e.getAreaList(),e.mapQueryPanel=!0;try{Object(m["a"])(["esri/map","esri/basemaps","esri/layers/GraphicsLayer","esri/lang","dijit/TooltipDialog","dijit/popup","dojo/dom-style"]).then((function(t){var n=Object(r["a"])(t,7),i=n[0],o=n[1],l=n[2],s=n[3],c=n[4],p=n[5],d=n[6];o.mapLayerPath=m["b"],e.map.arcgisMap=new i("arcgisMap",{basemap:"mapLayerPath",spatialReference:{wkid:4326},center:[120.197521,30.24298],zoom:6}),a.map.arcgisMap.infoWindow.resize(245,125),a.map.dialog=new c({style:"position: absolute; width: 350px; font: normal normal normal 10pt Helvetica;z-index:100"}),a.map.dialog.startup(),e.map.arcgisMap.on("load",(function(){e.map.levelMap=new l({id:"levelmap"}),e.map.arcgisMap.addLayer(e.map.levelMap),e.map.marMap=new l({id:"marMap"}),e.map.arcgisMap.addLayer(e.map.marMap),a.map.marMap.on("click",(function(e){g()(".mapDialog").hide(),p.close(a.map.dialog);var t=e.graphic.attributes,n='<div class="mapDialog" style=""><div class="mapToolPanel"><TitleCircle><HyperCircle></HyperCircle>网约车-'+t.vehino+'<HyperCircle></HyperCircle><i class="iconfont icon-close"></i></TitleCircle><div class="conent" style="padding-top: 20px;"><div class="rowbox clearfix"><div class="normBox" type="left" style="display: inline-block;"><div class="normTitle">速度</div><div class="normInfo sbig"><span class="intensify">'+t.speed+'</span>KM/H</div></div><div class="normBox" type="right" style="display: inline-block;"><div class="normTitle">营运状态</div><div class="normInfo sbig" style="font-size: 18px">'+a.fomarttype1(t.bizStatus)+'</div></div></div><div class="normBox" type="left"><div class="normTitle">GPS时间</div><div class="normInfo sbig">'+a.fomarttime(t.dateTime)+'</div></div><div class="normBox" type="left"><div class="normTitle">所属公司</div><div class="normInfo sbig">'+t.vehName+"</div></div></div></div></div>",i=s.substitute(e.graphic.attributes,n);a.map.dialog.setContent(i),d.set(a.map.dialog.domNode,"opacity",.85),p.open({popup:a.map.dialog,x:e.pageX,y:e.pageY}),g()(".icon-close").click((function(){g()(".mapDialog").hide(),p.close(a.map.dialog)}))}))}))}))}catch(t){}}))},computed:{tableColumn:function(){return[{prop:"ABB_NAME",label:"平台名称",width:80},{prop:"VEHICLENO",label:"车牌号码",width:90},{prop:"IN_OUT",label:"类型",width:50,"show-overflow-tooltip":!0,formatter:this.fomarttype},{prop:"POSITIONTIME",label:"定位时间","min-width":160,"show-overflow-tooltip":!0,resizable:!1,formatter:this.fomarttime}]},filterDataList:function(){var e=this;return s["a"].filter(this.fanceData,(function(a,t){return(e.currentPage-1)*e.tableRows<=t&&e.currentPage*e.tableRows>t}))}},methods:{iconClassName:d["c"],tableRowClassName:function(e){var a=e.row;e.rowIndex;return a.AREA_NUM>a.AREA_AVG_NUM?"danger-row":""},handleClick:function(e,a){console.log(e,a)},tabClick:function(e){this.tabIndex=e.index},getAreaList:function(){var e=this;l.a.get("map/getArea",{baseURL:this.baseURL}).then((function(a){var t=a.data,n=a.data;e.fanceList=n,e.areaList=t}))},fomarttype:function(e,a,t){return"0"==t?"进":"1"==t?"出":void 0},fomarttype1:function(e){return"1"==e?"载客":"2"==e?"接单":"3"==e?"空驶":"4"==e?"停运":void 0},fomarttime:function(e){return p()(e).format("YYYY-MM-DD HH:mm:ss")},getVehicleList:function(e){var a=this,t=e.AREA_ID;s["a"].each(this.areaList,(function(e,n){if(e.AREA_ID===t){a.areaname=e.AREA_NAME,a.map.levelMap.clear(),a.map.marMap.clear(),n;for(var i=new Array,r=e.AREA_ZB.split(";"),o=0;o<r.length;o++){var l=r[o].split(",");"1"==e.INSERT_TYPE?i.push([parseFloat(l[0])-.0049,parseFloat(l[1])+.0025]):i.push([parseFloat(l[0]),parseFloat(l[1])]),0==o&&a.map.arcgisMap.centerAndZoom([parseFloat(l[0]),parseFloat(l[1])],9)}a.addPolygon(e,i)}})),this.areaLonding=!0,l.a.get("map/getGet",{baseURL:this.baseURL,params:{comp_id:"all",type:"1",areaid:t}}).then((function(e){a.vehicleList=e.data,s["a"].map(a.vehicleList,(function(e){"didi"==e.mdt_no?e.icon="icon-ddzc":"shouyue"==e.mdt_no?e.icon="icon-sqzc":"caocao"==e.mdt_no?e.icon="icon-cczc":"wanshun"==e.mdt_no?e.icon="icon-wszc":"shenzhou"==e.mdt_no&&(e.icon="icon-szzc")})),a.areaLonding=!1,s["a"].each(e.data,(function(e){a.addmar(e)}))}))},handleAreaPanelChange:function(e){e?this.getVehicleList(e):this.vehicleList=[]},handleMapQueryPanelDisplayClick:function(){this.mapQueryPanel=!this.mapQueryPanel},addPolygon:function(e,a){var t=this;Object(m["a"])(["esri/graphic","esri/InfoTemplate","esri/geometry/Polygon","esri/symbols/SimpleFillSymbol","esri/symbols/SimpleLineSymbol","esri/Color"]).then((function(n){var i=Object(r["a"])(n,6),o=i[0],l=i[1],s=i[2],c=i[3],p=i[4],m=i[5],d=new l;d.setTitle("区域名  ${AREA_NAME}"),d.setContent("区域描述： ${AREA_MS}");var u={rings:[a],spatialReference:{wkid:4326}},g=new s(u);t.map.levelMap.add(new o(g,new c(c.STYLE_SOLID,new p(p.STYLE_SOLID,new m([42,242,255,.35]),1),new m([244,67,54,.2])),e,d))}))},addmar:function(e){var a=this;Object(m["a"])(["esri/geometry/Point","esri/graphic","esri/symbols/PictureMarkerSymbol"]).then((function(t){var n=Object(r["a"])(t,3),i=n[0],o=n[1],l=n[2],s=new i({x:e.longi-.0049,y:e.lati+.0025,spatialReference:{wkid:4326}}),c="";"didi"===e.mdt_no?c="image/marker/dd.png":"shenzhou"===e.mdt_no?c="image/marker/sz.png":"caocao"===e.mdt_no?c="image/marker/cc.png":"yidao"===e.mdt_no?c="image/marker/yd.png":"aa"===e.mdt_no?c="image/marker/aa.png":"yangguangchedao"===e.mdt_no?c="image/marker/yg.png":"wanshun"===e.mdt_no?c="image/marker/ws.png":"shouyue"===e.mdt_no?c="image/marker/sy.png":"TJHT"===e.mdt_no?c="image/marker/xcyc.png":"hhyc"===e.mdt_no?c="image/marker/hhdc.png":"tongcheng"===e.mdt_no?c="image/marker/mzdc.png":"dccx"===e.mdt_no?c="image/marker/dccx.png":"xiehua"===e.mdt_no?c="image/marker/xhcx.png":"xiangdao"===e.mdt_no?c="image/marker/xdcx.png":"weixing"===e.mdt_no?c="image/marker/ycx.png":"tmcx"===e.mdt_no?c="image/marker/tmcx.png":"gscx"===e.mdt_no?c="image/marker/gscx.png":"jbyy"===e.mdt_no?c="image/marker/jbyy.png":"lvcheng"===e.mdt_no?c="image/marker/lcyc.png":"T3"===e.mdt_no?c="image/marker/t3cx.png":"tfcx"===e.mdt_no?c="image/marker/tfcx.png":"tuotuo"===e.mdt_no?c="image/marker/ttex.png":"yicheng"===e.mdt_no&&(c="image/marker/yccx.png");var p=l(a.baseURL+c,28,38).setOffset(14,19);a.map.marMap.add(new o(s,p,e,""))}))},handleAreaFanceChange:function(e){var a=this;this.areaname=e.AREA_NAME,this.map.levelMap.clear(),this.map.marMap.clear();for(var t=new Array,n=e.AREA_ZB.split(";"),i=0;i<n.length;i++){var r=n[i].split(",");"1"==e.INSERT_TYPE?t.push([parseFloat(r[0])-.0049,parseFloat(r[1])+.0025]):t.push([parseFloat(r[0]),parseFloat(r[1])]),0==i&&this.map.arcgisMap.centerAndZoom([parseFloat(r[0]),parseFloat(r[1])],9)}this.addPolygon(e,t),this.fanceLonding=!0,l.a.get("map/getFance",{baseURL:this.baseURL,params:{areaid:e.AREA_ID}}).then((function(e){a.fanceLonding=!1,a.fanceData=e.data,a.total=e.data.length}))},handlePageSizeChange:function(e){this.currentPage=e},fomartyytype:function(e,a,t){return"1"==t?"载客":"2"==t?"接单":"3"==t?"空驶":"4"==t?"停运":void 0}}},h=f,v=(t("63e1"),t("2877")),b=Object(v["a"])(h,n,i,!1,null,"65811f66",null);a["default"]=b.exports},aae3:function(e,a,t){var n=t("d3f4"),i=t("2d95"),r=t("2b4c")("match");e.exports=function(e){var a;return n(e)&&(void 0!==(a=e[r])?!!a:"RegExp"==i(e))}},b0c5:function(e,a,t){"use strict";var n=t("520a");t("5ca1")({target:"RegExp",proto:!0,forced:n!==/./.exec},{exec:n})}}]);
//# sourceMappingURL=chunk-37eba750.c637a0e7.js.map